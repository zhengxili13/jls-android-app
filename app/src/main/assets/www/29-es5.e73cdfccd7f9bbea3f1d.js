!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,n||e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=o(e);if(t){var i=o(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"2IxY":function(s,c,a){"use strict";a.r(c),a.d(c,"SelectShippingAdressPageModule",(function(){return z}));var d=a("ofXK"),l=a("3Pt+"),u=a("TEn/"),b=a("tyNb"),p=a("mrSG"),f=a("n3qt"),g=a("fXoL"),h=a("kwrG"),v=a("MDGB"),y=a("x7k0"),P=a("e8h1"),m=a("sYmb"),w=a("O93g"),S=a("QibW");function A(e,t){if(1&e){var r=g.Rb();g.Qb(0,"div",6),g.Qb(1,"ion-grid",7),g.Qb(2,"ion-row",8),g.Qb(3,"ion-col",9),g.Lb(4,"mat-radio-button",10),g.Pb(),g.Qb(5,"ion-col",11),g.Qb(6,"a",12),g.Yb("click",(function(){g.nc(r);var e=t.$implicit;return g.ac().modifyAdress(e)})),g.vc(7),g.bc(8,"translate"),g.Pb(),g.Qb(9,"p",13),g.vc(10),g.Pb(),g.Qb(11,"p",13),g.vc(12),g.Pb(),g.Qb(13,"p",13),g.vc(14),g.Pb(),g.Qb(15,"p",13),g.vc(16),g.Pb(),g.Qb(17,"p",13),g.vc(18),g.Pb(),g.Qb(19,"p",13),g.vc(20),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb()}if(2&e){var n=t.$implicit;g.zb(4),g.gc("checked",n.IsDefaultAdress)("value",n.Id),g.zb(3),g.wc(g.cc(8,10,"select-shipping-adress.Modifier")),g.zb(3),g.xc("",n.ContactFirstName," "),g.zb(2),g.wc(n.ContactLastName),g.zb(2),g.wc(n.FirstLineAddress),g.zb(2),g.wc(n.SecondLineAddress),g.zb(2),g.yc("",n.ZipCode," ",n.City," "),g.zb(2),g.wc(n.ContactTelephone)}}function k(e,t){if(1&e){var r=g.Rb();g.Qb(0,"ion-footer"),g.Qb(1,"ion-toolbar",14),g.Qb(2,"div",15),g.Qb(3,"p",13),g.vc(4),g.Pb(),g.Qb(5,"p",13),g.vc(6),g.Pb(),g.Qb(7,"p",13),g.vc(8),g.Pb(),g.Qb(9,"div",16),g.Qb(10,"ion-button",17),g.Yb("click",(function(){return g.nc(r),g.ac().saveShippingAdress()})),g.vc(11),g.bc(12,"translate"),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb()}if(2&e){var n=g.ac();g.zb(4),g.xc("",n.getSelectedAdress().ContactFirstName," "),g.zb(2),g.wc(n.getSelectedAdress().FirstLineAddress),g.zb(2),g.yc("",n.getSelectedAdress().ZipCode," ",n.getSelectedAdress().City,""),g.zb(3),g.xc(" ",g.cc(12,5,"select-shipping-adress.Confirmer"),"")}}var Q,C,x,O=[{path:"",component:(Q=function(s){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(u,s);var c,a,d,l=i(u);function u(t,r,n,i,s,o,c,a,d,b){var p;return e(this,u),(p=l.call(this)).navCtrl=t,p.network=r,p.toastCtrl=n,p.rest=i,p.utils=s,p.loadingCtrl=o,p.storage=c,p.translateService=a,p.router=d,p.addressService=b,p.adressList=[],p.addressService.selectedShipmentAdressBehaviour.subscribe((function(e){if(null!=e){var t=p.adressList.findIndex((function(t){return t.Id==e.Id}));t>=0?p.adressList[t]=e:p.adressList.push(e)}})),p.addressService.defaultShipmentAdressBehaviour.subscribe((function(e){null!=e&&(p.selectedAdressId=e.Id)})),p}return c=u,(a=[{key:"ngOnInit",value:function(){var e=this,t=Object.create(null,{showLoading:{get:function(){return r(o(u.prototype),"showLoading",e)}},showToast:{get:function(){return r(o(u.prototype),"showToast",e)}}});return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.previousPage=this.router.snapshot.queryParams.CurrentPage,"none"==this.network.type){e.next=10;break}return e.next=3,t.showLoading.call(this,this.loadingCtrl,this.translateService.instant("Loading"));case 3:return r=e.sent,e.next=6,this.utils.getKey("userId");case 6:n=e.sent,this.rest.GetUserShippingAdress(n).subscribe((function(e){e.Success&&null!=e.Data?i.adressList=e.Data:t.showToast.call(i,i.toastCtrl,i.translateService.instant("Msg_Error")),r.dismiss()}),(function(e){t.showToast.call(i,i.toastCtrl,i.translateService.instant("Msg_Error")),r.dismiss()})),e.next=11;break;case 10:t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"addNewAddress",value:function(){this.navCtrl.navigateForward("AddAdressPage",{queryParams:{type:"shippingAdress",currentPage:"SelectShippingAdressPage",action:"create"}})}},{key:"modifyAdress",value:function(e){this.addressService.selectedShipmentAdressBehaviour.next(e),this.navCtrl.navigateForward("AddAdressPage",{queryParams:{type:"shippingAdress",action:"update",currentPage:"SelectShippingAdressPage"}})}},{key:"saveShippingAdress",value:function(){var e=this.getSelectedAdress();this.addressService.defaultShipmentAdressBehaviour.next(e),this.navCtrl.back()}},{key:"ionViewWillLeave",value:function(){var e=this.getSelectedAdress();this.addressService.defaultShipmentAdressBehaviour.next(e)}},{key:"getSelectedAdress",value:function(){var e=this;if(this.adressList.length>0){var t=this.adressList.find((function(t){return t.Id==e.selectedAdressId}));return null==t&&(t=this.adressList[0]),t}return null}}])&&t(c.prototype,a),d&&t(c,d),u}(f.a),Q.\u0275fac=function(e){return new(e||Q)(g.Kb(u.ab),g.Kb(h.a),g.Kb(u.gb),g.Kb(v.a),g.Kb(y.a),g.Kb(u.Y),g.Kb(P.b),g.Kb(m.d),g.Kb(b.a),g.Kb(w.a))},Q.\u0275cmp=g.Eb({type:Q,selectors:[["app-select-shipping-adress"]],features:[g.wb],decls:15,vars:9,consts:[["slot","start"],["float-right","",1,"ion-float-right",2,"margin","10px 10px",3,"click"],[2,"margin-top","30px","clear","both"],[1,"example-radio-group",3,"ngModel","ngModelChange"],["class","productCard",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"productCard"],[1,"gridStyle",2,"background-color","white"],[1,"colStyle"],["size","2","col-2","",1,"align-text-middle","colStyle"],["color","primary",1,"example-radio-button",2,"color","#534d7a","margin-top","30px",3,"checked","value"],["size","10","col-10","",1,"colStyle"],["float-right","",1,"ion-float-right",3,"click"],[1,"addressDetail"],[2,"padding-bottom","0px"],[2,"padding","5px"],[1,"ion-text-center"],["size","small","color","primary",2,"width","100%",3,"click"]],template:function(e,t){1&e&&(g.Qb(0,"ion-header"),g.Qb(1,"ion-toolbar"),g.Qb(2,"ion-buttons",0),g.Lb(3,"ion-back-button"),g.Pb(),g.Qb(4,"ion-title"),g.vc(5),g.bc(6,"translate"),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"ion-content"),g.Qb(8,"a",1),g.Yb("click",(function(){return t.addNewAddress()})),g.vc(9),g.bc(10,"translate"),g.Pb(),g.Qb(11,"ion-list",2),g.Qb(12,"mat-radio-group",3),g.Yb("ngModelChange",(function(e){return t.selectedAdressId=e})),g.uc(13,A,21,12,"div",4),g.Pb(),g.Pb(),g.Pb(),g.uc(14,k,13,7,"ion-footer",5)),2&e&&(g.zb(5),g.wc(g.cc(6,5,"select-shipping-adress.Livraison")),g.zb(4),g.wc(g.cc(10,7,"select-shipping-adress.Ajouter")),g.zb(3),g.gc("ngModel",t.selectedAdressId),g.zb(1),g.gc("ngForOf",t.adressList),g.zb(1),g.gc("ngIf",null!=t.getSelectedAdress()))},directives:[u.t,u.V,u.i,u.e,u.f,u.U,u.q,u.B,S.b,l.k,l.n,d.j,d.k,u.s,u.H,u.p,S.a,u.r,u.h],pipes:[m.c],styles:[".addressDetail[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.gridStyle[_ngcontent-%COMP%]{border-bottom:1px solid grey}"]}),Q)}],L=((x=function t(){e(this,t)}).\u0275mod=g.Ib({type:x}),x.\u0275inj=g.Hb({factory:function(e){return new(e||x)},imports:[[b.j.forChild(O)],b.j]}),x),z=((C=function t(){e(this,t)}).\u0275mod=g.Ib({type:C}),C.\u0275inj=g.Hb({factory:function(e){return new(e||C)},imports:[[d.b,l.g,u.W,L,S.c,m.b]]}),C)}}])}();