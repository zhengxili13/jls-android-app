!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,n||e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var a=s(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return o(this,r)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{JzUc:function(o,i,c){"use strict";c.r(i),c.d(i,"AddAdressPageModule",(function(){return j}));var l=c("ofXK"),u=c("3Pt+"),d=c("TEn/"),b=c("tyNb"),f=c("mrSG"),p=c("n3qt"),h=c("fXoL"),m=c("sYmb"),v=c("kwrG"),y=c("MDGB"),g=c("x7k0"),w=c("e8h1"),x=c("O93g"),P=c("kmnG"),C=c("qFsG");function k(e,t){1&e&&(h.Qb(0,"ion-title"),h.vc(1),h.bc(2,"translate"),h.Pb()),2&e&&(h.zb(1),h.wc(h.cc(2,1,"add-adress.addAdress")))}function I(e,t){1&e&&(h.Qb(0,"ion-title"),h.vc(1),h.bc(2,"translate"),h.Pb()),2&e&&(h.zb(1),h.wc(h.cc(2,1,"add-adress.modifyAdress")))}var Q,A,O,L=[{path:"",component:(Q=function(o){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(b,o);var i,c,l,d=a(b);function b(t,r,n,a,o,s,i,c,l,f,p){var h;return e(this,b),(h=d.call(this)).navCtrl=t,h.translateService=r,h.network=n,h.formBuilder=a,h.rest=o,h.toastCtrl=s,h.utils=i,h.loadingCtrl=c,h.storage=l,h.router=f,h.addressService=p,h.adreeForm=h.formBuilder.group({Id:["0"],EntrepriseName:["",u.s.required],FirstLineAddress:["",u.s.required],SecondLineAddress:[""],City:["",u.s.required],Country:["",u.s.required],ZipCode:["",u.s.required],ContactTelephone:["",u.s.required],ContactFax:[""]}),h}return i=b,(c=[{key:"ngOnInit",value:function(){this.previousPage=this.router.snapshot.queryParams.currentPage,this.type=this.router.snapshot.queryParams.type,"facturationAdress"==this.type?this.adreeForm.patchValue(this.addressService.facturationAddressBehaviour.value):(this.type="shippingAdress")&&("create"==this.router.snapshot.queryParams.action?this.loadUserInfo():"update"==this.router.snapshot.queryParams.action&&this.adreeForm.patchValue(this.addressService.selectedShipmentAdressBehaviour.value))}},{key:"loadUserInfo",value:function(){var e=this,t=Object.create(null,{showLoading:{get:function(){return r(s(b.prototype),"showLoading",e)}},showToast:{get:function(){return r(s(b.prototype),"showToast",e)}}});return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"==this.network.type){e.next=11;break}return e.next=3,t.showLoading.call(this,this.loadingCtrl,this.translateService.instant("Loading"));case 3:return r=e.sent,e.t0=this.rest,e.next=7,this.utils.getKey("userId");case 7:e.t1=e.sent,e.t0.GetUserById.call(e.t0,e.t1).subscribe((function(e){null!=e?n.adreeForm.patchValue({EntrepriseName:null!=e.EntrepriseName?e.EntrepriseName:"",ContactTelephone:null!=e.PhoneNumber?e.PhoneNumber:""}):t.showToast.call(n,n.toastCtrl,n.translateService.instant("Msg_Error")),r.dismiss()}),(function(e){t.showToast.call(n,n.toastCtrl,n.translateService.instant("Msg_Error")),r.dismiss()})),e.next=12;break;case 11:t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"));case 12:case"end":return e.stop()}}),e,this)})))}},{key:"saveAdress",value:function(){var e=this,t=Object.create(null,{showLoading:{get:function(){return r(s(b.prototype),"showLoading",e)}},showToast:{get:function(){return r(s(b.prototype),"showToast",e)}}});return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,n,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in this.adreeForm.controls)this.adreeForm.controls[r].markAsTouched();if(this.adreeForm.invalid){e.next=16;break}if("none"==this.network.type){e.next=15;break}return e.t0=this.adreeForm.value,e.next=6,this.utils.getKey("userId");case 6:return e.t1=e.sent,e.t2=this.type,n={adress:e.t0,userId:e.t1,type:e.t2},e.next=11,t.showLoading.call(this,this.loadingCtrl,this.translateService.instant("Loading"));case 11:a=e.sent,this.rest.CreateOrUpdateAdress(n).subscribe((function(e){if(e.Success&&null!=e.Data){if("facturationAdress"==o.type)o.addressService.facturationAddressBehaviour.next(o.adreeForm.value),o.navCtrl.back();else if(o.type="shippingAdress"){var r=o.adreeForm.value;null!=e.Data.AdressId&&(r.Id=e.Data.AdressId),o.addressService.selectedShipmentAdressBehaviour.next(r),o.navCtrl.back()}a.dismiss()}else a.dismiss(),t.showToast.call(o,o.toastCtrl,o.translateService.instant("Msg_Error"))}),(function(e){a.dismiss(),t.showToast.call(o,o.toastCtrl,o.translateService.instant("Msg_Error"))})),e.next=16;break;case 15:t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"));case 16:case"end":return e.stop()}}),e,this)})))}},{key:"f",get:function(){return this.adreeForm.controls}}])&&t(i.prototype,c),l&&t(i,l),b}(p.a),Q.\u0275fac=function(e){return new(e||Q)(h.Kb(d.ab),h.Kb(m.d),h.Kb(v.a),h.Kb(u.b),h.Kb(y.a),h.Kb(d.gb),h.Kb(g.a),h.Kb(d.Y),h.Kb(w.b),h.Kb(b.a),h.Kb(x.a))},Q.\u0275cmp=h.Eb({type:Q,selectors:[["app-add-adress"]],features:[h.wb],decls:49,vars:30,consts:[["slot","start"],["slot","end"],["color","primary",2,"width","100%","height","35px",3,"click"],[4,"ngIf"],[2,"background-color","#f4f4f4!important"],[2,"margin-top","0px","margin-left","0px","margin-right","0px","width","100%"],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["required","","matInput","","formControlName","EntrepriseName",3,"placeholder"],["required","","matInput","","formControlName","FirstLineAddress",3,"placeholder"],["matInput","","formControlName","SecondLineAddress",3,"placeholder"],["col-4",""],["required","","matInput","","formControlName","City",3,"placeholder"],["required","","matInput","","formControlName","Country",3,"placeholder"],["required","","matInput","","maxlength","5","formControlName","ZipCode",3,"placeholder"],["postalCode",""],["required","","type","tel","matInput","","placeholder","EX: +33 xx xx xx xx xx","formControlName","ContactTelephone"],["matPrefix",""],["type","tel","matInput","","placeholder","EX: +33 xx xx xx xx xx","formControlName","ContactFax"]],template:function(e,t){1&e&&(h.Qb(0,"ion-header"),h.Qb(1,"ion-toolbar"),h.Qb(2,"ion-buttons",0),h.Lb(3,"ion-back-button"),h.Pb(),h.Qb(4,"ion-buttons",1),h.Qb(5,"ion-button",2),h.Yb("click",(function(){return t.saveAdress()})),h.vc(6),h.bc(7,"translate"),h.Pb(),h.Pb(),h.uc(8,k,3,3,"ion-title",3),h.uc(9,I,3,3,"ion-title",3),h.Pb(),h.Pb(),h.Qb(10,"ion-content",4),h.Qb(11,"ion-card",5),h.Qb(12,"ion-card-content"),h.Qb(13,"form",6),h.Qb(14,"mat-form-field",7),h.Lb(15,"input",8),h.bc(16,"translate"),h.Pb(),h.Qb(17,"mat-form-field",7),h.Lb(18,"textarea",9),h.bc(19,"translate"),h.Pb(),h.Qb(20,"mat-form-field",7),h.Lb(21,"textarea",10),h.bc(22,"translate"),h.Pb(),h.Qb(23,"ion-row"),h.Qb(24,"ion-col",11),h.Qb(25,"mat-form-field",7),h.Lb(26,"input",12),h.bc(27,"translate"),h.Pb(),h.Pb(),h.Qb(28,"ion-col",11),h.Qb(29,"mat-form-field",7),h.Lb(30,"input",13),h.bc(31,"translate"),h.Pb(),h.Pb(),h.Qb(32,"ion-col",11),h.Qb(33,"mat-form-field",7),h.Lb(34,"input",14,15),h.bc(36,"translate"),h.Pb(),h.Pb(),h.Pb(),h.Qb(37,"mat-form-field",7),h.Qb(38,"mat-label"),h.vc(39),h.bc(40,"translate"),h.Pb(),h.Lb(41,"input",16),h.Pb(),h.Qb(42,"mat-form-field",7),h.Qb(43,"mat-label"),h.vc(44),h.bc(45,"translate"),h.Pb(),h.Qb(46,"span",17),h.vc(47,"+33 \xa0"),h.Pb(),h.Lb(48,"input",18),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb()),2&e&&(h.zb(6),h.xc(" ",h.cc(7,12,"add-adress.Enregistrer")," "),h.zb(2),h.gc("ngIf",0==t.adreeForm.controls.Id.value),h.zb(1),h.gc("ngIf",0!=t.adreeForm.controls.Id.value),h.zb(4),h.gc("formGroup",t.adreeForm),h.zb(2),h.hc("placeholder",h.cc(16,14,"add-adress.Entreprise")),h.zb(3),h.hc("placeholder",h.cc(19,16,"add-adress.Address")),h.zb(3),h.hc("placeholder",h.cc(22,18,"add-adress.Address2")),h.zb(5),h.hc("placeholder",h.cc(27,20,"add-adress.City")),h.zb(4),h.hc("placeholder",h.cc(31,22,"add-adress.Country")),h.zb(4),h.hc("placeholder",h.cc(36,24,"add-adress.PostalCode")),h.zb(5),h.wc(h.cc(40,26,"add-adress.Telephone")),h.zb(5),h.wc(h.cc(45,28,"add-adress.Fax")))},directives:[d.t,d.V,d.i,d.e,d.f,d.h,l.k,d.q,d.j,d.k,u.t,u.l,u.f,P.c,C.a,u.a,u.r,u.k,u.e,d.H,d.p,u.h,P.f,P.g,d.U],pipes:[m.c],styles:[".mat-form-field[_ngcontent-%COMP%]{display:inline}"]}),Q)}],S=((A=function t(){e(this,t)}).\u0275mod=h.Ib({type:A}),A.\u0275inj=h.Hb({factory:function(e){return new(e||A)},imports:[[b.j.forChild(L)],b.j]}),A),F=c("NFeN"),q=c("d3UM"),j=((O=function t(){e(this,t)}).\u0275mod=h.Ib({type:O}),O.\u0275inj=h.Hb({factory:function(e){return new(e||O)},imports:[[l.b,u.g,d.W,S,P.e,C.b,F.b,q.a,m.b,u.q]]}),O)}}])}();