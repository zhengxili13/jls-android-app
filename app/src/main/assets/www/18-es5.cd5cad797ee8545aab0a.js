!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,n||e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"h+oH":function(o,a,c){"use strict";c.r(a),c.d(a,"ModifyUserInfoPageModule",(function(){return U}));var u=c("ofXK"),d=c("3Pt+"),l=c("TEn/"),f=c("tyNb"),b=c("mrSG"),p=c("n3qt"),h=c("fXoL"),m=c("kwrG"),g=c("MDGB"),v=c("sYmb"),P=c("O93g"),y=c("kmnG"),A=c("qFsG");function S(e,t){if(1&e&&(h.Qb(0,"ion-card-content",24),h.Qb(1,"p",25),h.vc(2),h.Qb(3,"span"),h.vc(4),h.Pb(),h.Pb(),h.Qb(5,"p",25),h.vc(6),h.Pb(),h.Qb(7,"p",25),h.vc(8),h.Pb(),h.Qb(9,"p",25),h.vc(10),h.Qb(11,"span"),h.vc(12),h.Pb(),h.Pb(),h.Qb(13,"p",25),h.vc(14),h.Pb(),h.Pb()),2&e){var r=h.ac();h.zb(2),h.xc("",r.defaultShippingAdress.ContactFirstName," "),h.zb(2),h.xc(" ",r.defaultShippingAdress.ContactLastName,""),h.zb(2),h.xc("",r.defaultShippingAdress.FirstLineAddress," "),h.zb(2),h.xc("",r.defaultShippingAdress.SecondLineAddress," "),h.zb(2),h.xc("",r.defaultShippingAdress.ZipCode," "),h.zb(2),h.xc(" ",r.defaultShippingAdress.City," "),h.zb(2),h.xc("",r.defaultShippingAdress.ContactTelephone," ")}}function x(e,t){1&e&&(h.Qb(0,"ion-card-content",26),h.Qb(1,"p",27),h.vc(2),h.bc(3,"translate"),h.Pb(),h.Pb()),2&e&&(h.zb(2),h.wc(h.cc(3,1,"NoDataToDisplay")))}function w(e,t){if(1&e){var r=h.Rb();h.Qb(0,"ion-button",28),h.Yb("click",(function(){return h.nc(r),h.ac().selectShippingAdress()})),h.vc(1),h.bc(2,"translate"),h.Pb()}2&e&&(h.zb(1),h.wc(h.cc(2,1,"order-confirmation.ChooseAnotherAddress")))}function Q(e,t){if(1&e){var r=h.Rb();h.Qb(0,"ion-button",29),h.Yb("click",(function(){return h.nc(r),h.ac().selectShippingAdress()})),h.vc(1),h.bc(2,"translate"),h.Pb()}2&e&&(h.zb(1),h.wc(h.cc(2,1,"Add")))}var I,z,k,C=[{path:"",component:(I=function(o){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(f,o);var a,c,u,l=i(f);function f(t,r,n,i,o,s,a,c,u){var b;return e(this,f),(b=l.call(this)).navCtrl=t,b.formBuilder=r,b.toastCtrl=n,b.loadingCtrl=i,b.network=o,b.rest=s,b.translateService=a,b.router=c,b.addressService=u,b.defaultShippingAdress={},b.UserInfo={},b.userForm=b.formBuilder.group({EntrepriseName:["",d.s.required],Siret:["",d.s.required],PhoneNumber:["",d.s.required]}),b.addressService.facturationAddressBehaviour.subscribe((function(e){return b.facturationAdress=e})),b.addressService.defaultShipmentAdressBehaviour.subscribe((function(e){return b.defaultShippingAdress=e})),b}return a=f,(c=[{key:"ionViewWillEnter",value:function(){this.defaultShippingAdress=null!=this.router.snapshot.queryParams.tempSelectedAdress?JSON.parse(this.router.snapshot.queryParams.tempSelectedAdress):this.defaultShippingAdress,this.facturationAdress=null!=this.router.snapshot.queryParams.facturationAdress?JSON.parse(this.router.snapshot.queryParams.facturationAdress):this.facturationAdress}},{key:"ngOnInit",value:function(){var e=this.router.snapshot.queryParams.UserInfo;if(this.UserInfo=null!=e?JSON.parse(e):{},this.userForm.patchValue({EntrepriseName:this.UserInfo.EntrepriseName,Siret:this.UserInfo.Siret,PhoneNumber:this.UserInfo.PhoneNumber}),null!=this.UserInfo.FacturationAdress&&this.addressService.facturationAddressBehaviour.next(this.UserInfo.FacturationAdress),null!=this.UserInfo.ShippingAdress&&this.UserInfo.ShippingAdress.length>0){var t=this.UserInfo.ShippingAdress.find((function(e){return 1==e.IsDefaultAdress}));this.addressService.defaultShipmentAdressBehaviour.next(t=null==t?this.UserInfo.ShippingAdress[0]:t)}}},{key:"modifyFacturationAdress",value:function(){this.navCtrl.navigateForward("AddAdressPage",{queryParams:{type:"facturationAdress",currentPage:"ModifyUserInfoPage"}})}},{key:"selectShippingAdress",value:function(){this.navCtrl.navigateForward("SelectShippingAdressPage",{queryParams:{CurrentPage:"ModifyUserInfoPage"}})}},{key:"saveUserInfo",value:function(){var e=this,t=Object.create(null,{showLoading:{get:function(){return r(s(f.prototype),"showLoading",e)}},showToast:{get:function(){return r(s(f.prototype),"showToast",e)}}});return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,n,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in this.userForm.controls)this.userForm.controls[r].markAsTouched();if(this.userForm.invalid){e.next=13;break}if("none"==this.network.type){e.next=12;break}return console.log(this.userForm.value),(n=this.userForm.value).UserId=localStorage.getItem("userId"),n.DefaultShippingAddressId=null!=this.defaultShippingAdress?this.defaultShippingAdress.Id:0,e.next=8,t.showLoading.call(this,this.loadingCtrl,this.translateService.instant("Loading"));case 8:i=e.sent,this.rest.UpdateUserInfo(n).subscribe((function(e){null!=e&&e>0&&(o.UserInfo.EntrepriseName=o.userForm.value.EntrepriseName,o.UserInfo.Siret=o.userForm.value.Siret,o.UserInfo.PhoneNumber=o.userForm.value.PhoneNumber,o.UserInfo.FacturationAdress=o.facturationAdress,o.addressService.facturationAddressBehaviour.next(o.facturationAdress),t.showToast.call(o,o.toastCtrl,o.translateService.instant("Msg_SaveSuccess"))),i.dismiss()}),(function(e){t.showToast.call(o,o.toastCtrl,o.translateService.instant("Msg_Error")),i.dismiss()})),e.next=13;break;case 12:t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"));case 13:case"end":return e.stop()}}),e,this)})))}}])&&t(a.prototype,c),u&&t(a,u),f}(p.a),I.\u0275fac=function(e){return new(e||I)(h.Kb(l.ab),h.Kb(d.b),h.Kb(l.gb),h.Kb(l.Y),h.Kb(m.a),h.Kb(g.a),h.Kb(v.d),h.Kb(f.a),h.Kb(P.a))},I.\u0275cmp=h.Eb({type:I,selectors:[["app-modify-user-info"]],features:[h.wb],decls:62,vars:36,consts:[["slot","start"],["slot","end"],["Expand","full","color","primary",3,"click"],[2,"margin","0px","width","100%"],[2,"padding-bottom","3px"],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["required","","matInput","","formControlName","EntrepriseName",3,"placeholder"],["required","","type","tel","matInput","","formControlName","Siret",3,"placeholder"],["matPrefix",""],["required","","type","tel","matInput","","formControlName","PhoneNumber",3,"placeholder"],[2,"padding","8px"],[2,"margin-bottom","0px"],[1,"productCard",2,"width","100%","border-bottom","0px"],[2,"padding","8px 4px 0px"],[1,"productTitle","ion-no-margin"],["style","padding: 0px; ",4,"ngIf"],["style","padding-left: 8px;",4,"ngIf"],["text-center","",1,"ion-text-center"],["size","small","color","primary","fill","outline",3,"click",4,"ngIf"],["ion-button","","size","small","color","primary","fill","outline",3,"click",4,"ngIf"],[2,"padding","8px","margin-bottom","20px"],[1,"productTitle",2,"padding","8px 4px 0px"],["float-right","",1,"articleNumber","ion-float-right",3,"click"],[2,"padding","0px"],[1,"descriptionFont"],[2,"padding-left","8px"],["text-center","",1,"descriptionFont"],["size","small","color","primary","fill","outline",3,"click"],["ion-button","","size","small","color","primary","fill","outline",3,"click"]],template:function(e,t){1&e&&(h.Qb(0,"ion-header"),h.Qb(1,"ion-toolbar"),h.Qb(2,"ion-buttons",0),h.Lb(3,"ion-back-button"),h.Pb(),h.Qb(4,"ion-buttons",1),h.Qb(5,"ion-button",2),h.Yb("click",(function(){return t.saveUserInfo()})),h.vc(6),h.bc(7,"translate"),h.Pb(),h.Pb(),h.Qb(8,"ion-title"),h.vc(9),h.bc(10,"translate"),h.Pb(),h.Pb(),h.Pb(),h.Qb(11,"ion-content"),h.Qb(12,"ion-card",3),h.Qb(13,"ion-card-content",4),h.Qb(14,"form",5),h.Qb(15,"mat-form-field",6),h.Lb(16,"input",7),h.bc(17,"translate"),h.Pb(),h.Qb(18,"mat-form-field",6),h.Lb(19,"input",8),h.bc(20,"translate"),h.Pb(),h.Qb(21,"mat-form-field",6),h.Qb(22,"span",9),h.vc(23,"+33 \xa0"),h.Pb(),h.Lb(24,"input",10),h.bc(25,"translate"),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Qb(26,"div",11),h.Qb(27,"ion-list",12),h.Qb(28,"ion-card",13),h.Qb(29,"ion-card-header",14),h.Qb(30,"h3",15),h.vc(31),h.bc(32,"translate"),h.Pb(),h.Pb(),h.uc(33,S,15,7,"ion-card-content",16),h.uc(34,x,4,3,"ion-card-content",17),h.Pb(),h.Qb(35,"div",18),h.uc(36,w,3,3,"ion-button",19),h.uc(37,Q,3,3,"ion-button",20),h.Pb(),h.Pb(),h.Pb(),h.Qb(38,"div",21),h.Qb(39,"ion-card",13),h.Qb(40,"ion-card-header",22),h.Qb(41,"h3",15),h.vc(42),h.bc(43,"translate"),h.Qb(44,"a",23),h.Yb("click",(function(){return t.modifyFacturationAdress()})),h.vc(45),h.bc(46,"translate"),h.Pb(),h.Pb(),h.Pb(),h.Qb(47,"ion-card-content",24),h.Qb(48,"p",25),h.vc(49),h.Qb(50,"span"),h.vc(51),h.Pb(),h.Pb(),h.Qb(52,"p",25),h.vc(53),h.Pb(),h.Qb(54,"p",25),h.vc(55),h.Pb(),h.Qb(56,"p",25),h.vc(57),h.Qb(58,"span"),h.vc(59),h.Pb(),h.Pb(),h.Qb(60,"p",25),h.vc(61),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb()),2&e&&(h.zb(6),h.xc("",h.cc(7,20,"add-adress.Enregistrer")," "),h.zb(3),h.wc(h.cc(10,22,"modify-user-info.modifyUserInfo")),h.zb(5),h.gc("formGroup",t.userForm),h.zb(2),h.hc("placeholder",h.cc(17,24,"add-adress.Entreprise")),h.zb(3),h.hc("placeholder",h.cc(20,26,"modify-user-info.Siret")),h.zb(5),h.hc("placeholder",h.cc(25,28,"add-adress.Telephone")),h.zb(7),h.wc(h.cc(32,30,"order-confirmation.ShippingAddress")),h.zb(2),h.gc("ngIf",null!=t.defaultShippingAdress),h.zb(1),h.gc("ngIf",null==t.defaultShippingAdress),h.zb(2),h.gc("ngIf",null!=t.defaultShippingAdress),h.zb(1),h.gc("ngIf",null==t.defaultShippingAdress),h.zb(5),h.xc("",h.cc(43,32,"order-confirmation.BillingAddress")," "),h.zb(3),h.wc(h.cc(46,34,"order-confirmation.Edit")),h.zb(4),h.xc("",t.facturationAdress.ContactFirstName," "),h.zb(2),h.xc(" ",t.facturationAdress.ContactLastName,""),h.zb(2),h.xc("",t.facturationAdress.FirstLineAddress," "),h.zb(2),h.xc("",t.facturationAdress.SecondLineAddress," "),h.zb(2),h.xc("",t.facturationAdress.ZipCode," "),h.zb(2),h.xc(" ",t.facturationAdress.City," "),h.zb(2),h.xc("",t.facturationAdress.ContactTelephone," "))},directives:[l.t,l.V,l.i,l.e,l.f,l.h,l.U,l.q,l.j,l.k,d.t,d.l,d.f,y.c,A.a,d.a,d.r,d.k,d.e,y.g,l.B,l.l,u.k],pipes:[v.c],styles:[".articleNumber[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:500}.productCard[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-left:0;margin-right:0;box-shadow:none!important;border-bottom:.5px solid #dedede;margin-top:0}.productTitle[_ngcontent-%COMP%]{font-weight:500;background-color:#f4f4f4;padding:3px;color:#000}.descriptionFont[_ngcontent-%COMP%]{margin:2px 0;color:var(--ion-color-warning-contrast)}.mat-form-field[_ngcontent-%COMP%]{display:inline}"]}),I)}],N=((z=function t(){e(this,t)}).\u0275mod=h.Ib({type:z}),z.\u0275inj=h.Hb({factory:function(e){return new(e||z)},imports:[[f.j.forChild(C)],f.j]}),z),F=c("d3UM"),O=c("NFeN"),U=((k=function t(){e(this,t)}).\u0275mod=h.Ib({type:k}),k.\u0275inj=h.Hb({factory:function(e){return new(e||k)},imports:[[u.b,d.g,l.W,N,v.b,y.e,A.b,F.a,O.b,d.q]]}),k)}}])}();