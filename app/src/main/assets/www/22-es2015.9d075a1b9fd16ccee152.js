(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"6hUG":function(t,o,i){"use strict";i.r(o),i.d(o,"ProductDetailPageModule",(function(){return S}));var c=i("ofXK"),n=i("3Pt+"),e=i("TEn/"),r=i("tyNb"),s=i("mrSG"),a=i("n3qt"),u=i("AytR"),b=i("fXoL"),l=i("sYmb"),d=i("e8h1"),p=i("x7k0"),h=i("MDGB"),g=i("kwrG"),m=i("/NBf"),P=i("j7Is");function f(t,o){if(1&t&&(b.Qb(0,"div",28),b.vc(1),b.Pb()),2&t){const t=b.ac(2);b.zb(1),b.xc(" ",t.utils.formatProductPromotionInfo(t.product).discountPerCent,"% ")}}function v(t,o){1&t&&(b.Qb(0,"div",29),b.vc(1),b.bc(2,"translate"),b.Pb()),2&t&&(b.zb(1),b.xc(" ",b.cc(2,1,"home.New")," "))}function I(t,o){if(1&t&&b.Lb(0,"img",30),2&t){const t=b.ac().$implicit,o=b.ac();b.gc("src",o.host+t.Path,b.pc)}}function Q(t,o){if(1&t&&(b.Qb(0,"ion-slide"),b.Qb(1,"div",24),b.uc(2,f,2,1,"div",25),b.uc(3,v,3,3,"div",26),b.Pb(),b.uc(4,I,1,1,"img",27),b.Pb()),2&t){const t=o.$implicit,i=b.ac();b.zb(2),b.gc("ngIf",i.logined&&null!=i.utils.formatProductPromotionInfo(i.product)),b.zb(1),b.gc("ngIf",i.product.IsNew),b.zb(1),b.gc("ngIf",t.Path)}}function z(t,o){1&t&&b.Lb(0,"img",31)}function y(t,o){if(1&t){const t=b.Rb();b.Qb(0,"span",32),b.Yb("click",(function(){return b.nc(t),b.ac().displayAvis()})),b.vc(1),b.bc(2,"translate"),b.Pb()}if(2&t){const t=b.ac();b.zb(1),b.yc("(",t.product.Comments.length," ",b.cc(2,2,"product-detail.avis"),")")}}function C(t,o){if(1&t&&(b.Qb(0,"ion-item"),b.vc(1),b.bc(2,"translate"),b.Pb()),2&t){const t=b.ac();b.zb(1),b.yc(" ",b.cc(2,2,"product-detail.Price")," :",t.product.Price," \u20ac (HT) ")}}function w(t,o){if(1&t&&(b.Qb(0,"ion-item"),b.vc(1),b.bc(2,"translate"),b.Qb(3,"span",33),b.vc(4),b.Pb(),b.vc(5,"(HT) "),b.Pb()),2&t){const t=b.ac();b.zb(1),b.xc(" ",b.cc(2,2,"product-detail.OriginalPrice")," :"),b.zb(3),b.xc("",t.product.PreviousPrice," \u20ac")}}function x(t,o){if(1&t&&(b.Qb(0,"ion-item"),b.vc(1),b.bc(2,"translate"),b.Pb()),2&t){const t=b.ac();b.zb(1),b.yc(" ",b.cc(2,2,"cart.QuantityPerParcel")," : ",t.product.QuantityPerBox," ")}}function L(t,o){if(1&t&&(b.Qb(0,"ion-item"),b.vc(1),b.bc(2,"translate"),b.Pb()),2&t){const t=b.ac();b.zb(1),b.yc(" ",b.cc(2,2,"cart.QuantityPerParcel")," : ",t.product.QuantityPerParcel," ")}}function k(t,o){if(1&t&&(b.Qb(0,"ion-item"),b.vc(1),b.bc(2,"translate"),b.Pb()),2&t){const t=b.ac();b.zb(1),b.yc(" ",b.cc(2,2,"cart.EachBox")," : ",t.product.QuantityPerBox," ")}}const F=[{path:"",component:(()=>{class t extends a.a{constructor(t,o,i,c,n,e,r,s,a){super(),this.navCtrl=t,this.translateService=o,this.storage=i,this.utils=c,this.rest=n,this.network=e,this.toastCtrl=r,this.router=s,this.cartService=a,this.isFavorite=!1,this.hasBought=!1,this.logined=!1,this.product={},this.host=u.a.SERVER_API_URL}ngOnInit(){console.log("ionViewDidLoad ProductDetailPage"),this.productId=this.router.snapshot.queryParams.productId,this.checkLogined(),this.initLoadData()}addProductIntoFavoriteList(){this.logined?(this.isFavorite=!this.isFavorite,"none"!=this.network.type?this.rest.AddIntoProductFavoriteList({UserId:localStorage.getItem("userId"),ProductId:this.product.ProductId,IsFavorite:this.isFavorite}).subscribe(t=>{null!=t&&t>0&&super.showToast(this.toastCtrl,this.translateService.instant(0==this.isFavorite?"Msg_RemoveIntoFavoriteList":"Msg_AddFavoriteList"))},t=>{super.showToast(this.toastCtrl,t.Msg)}):super.showToast(this.toastCtrl,this.translateService.instant("Msg_Offline"))):super.showToast(this.toastCtrl,this.translateService.instant("Msg_NotConnected"))}writeEvaluation(){this.logined?this.hasBought?this.navCtrl.navigateForward("WriteProductEvaluationPage",{queryParams:{productId:this.productId}}):super.showToast(this.toastCtrl,this.translateService.instant("Msg_CantComment")):super.showToast(this.toastCtrl,this.translateService.instant("Msg_NotConnected"))}calculCommentAverageLevel(){var t=5;if(null!=this.product&&null!=this.product.Comments&&this.product.Comments.length>0){var o=0;this.product.Comments.forEach(t=>{o=t.Level+o}),t=o/this.product.Comments.length}return t}initLoadData(){null!=this.productId&&0!=this.productId&&this.rest.GetProductById(this.productId).subscribe(t=>{null!=t&&(console.log(t),this.product=t,this.isFavorite=t.IsFavorite,this.hasBought=t.HasBought)},t=>{})}checkLogined(){return Object(s.a)(this,void 0,void 0,(function*(){this.logined=yield this.utils.checkIsLogined()}))}displayAvis(){null!=this.product.Comments&&this.product.Comments.length>0&&this.navCtrl.navigateForward("ProductEvaluationListPage",{queryParams:{type:"GetCommentByProductId",productId:this.productId}})}addInCart(t,o){return Object(s.a)(this,void 0,void 0,(function*(){t.stopPropagation(),this.cartService.addInCart(o)}))}}return t.\u0275fac=function(o){return new(o||t)(b.Kb(e.ab),b.Kb(l.d),b.Kb(d.b),b.Kb(p.a),b.Kb(h.a),b.Kb(g.a),b.Kb(e.gb),b.Kb(r.a),b.Kb(m.a))},t.\u0275cmp=b.Eb({type:t,selectors:[["app-product-detail"]],features:[b.wb],decls:67,vars:43,consts:[["slot","start"],["pager","",1,"slidePagers"],[4,"ngFor","ngForOf"],["class","productImg","src","assets/imgs/not-found.png",4,"ngIf"],[1,"ion-text-center"],["size","4","col-4","",1,"iconCol",3,"click"],["icon-only",""],["name","bookmark"],[1,"iconText"],["name","cart"],["size","4","col-4","",1,"iconCol"],["icon-only","",3,"click"],["name","create"],[2,"font-size","unset","color","#222"],["align-items-center","",3,"click"],["col-2","","size","2"],["color","primary","name","chatbox",2,"font-size","xx-large"],["col-6","","size","6"],["defaultIcon","ios-star-outline","activeColor","#534d7a","defaultColor","cadetblue","readonly","true","fontSize","24px",3,"rating"],["rating",""],["col-4","","size","4"],["float-right","","class","nombreAvis",3,"click",4,"ngIf"],[4,"ngIf"],[2,"color","black","font-size","1em"],[1,"product-card__badges-list",2,"top","18px","right","18px"],["class","product-card__badge promotion","style","font-size: 14px;",4,"ngIf"],["class","product-card__badge_New promotion","style","position: absolute; top: 25px;right: -2px;",4,"ngIf"],["class","productDetailImg","style","height: 250px;",3,"src",4,"ngIf"],[1,"product-card__badge","promotion",2,"font-size","14px"],[1,"product-card__badge_New","promotion",2,"position","absolute","top","25px","right","-2px"],[1,"productDetailImg",2,"height","250px",3,"src"],["src","assets/imgs/not-found.png",1,"productImg"],["float-right","",1,"nombreAvis",3,"click"],[2,"text-decoration","line-through"]],template:function(t,o){1&t&&(b.Qb(0,"ion-header"),b.Qb(1,"ion-toolbar"),b.Qb(2,"ion-buttons",0),b.Lb(3,"ion-back-button"),b.Pb(),b.Qb(4,"ion-title"),b.vc(5),b.bc(6,"uppercase"),b.Pb(),b.Pb(),b.Pb(),b.Qb(7,"ion-content"),b.Qb(8,"div"),b.Qb(9,"ion-slides",1),b.uc(10,Q,5,3,"ion-slide",2),b.uc(11,z,1,0,"img",3),b.Pb(),b.Pb(),b.Qb(12,"div"),b.Qb(13,"ion-row",4),b.Qb(14,"ion-col",5),b.Yb("click",(function(){return o.addProductIntoFavoriteList()})),b.Qb(15,"ion-button",6),b.Lb(16,"ion-icon",7),b.Pb(),b.Qb(17,"p",8),b.vc(18),b.bc(19,"translate"),b.Pb(),b.Pb(),b.Qb(20,"ion-col",5),b.Yb("click",(function(t){return o.addInCart(t,o.product)})),b.Qb(21,"ion-button",6),b.Lb(22,"ion-icon",9),b.Pb(),b.Qb(23,"p",8),b.vc(24),b.bc(25,"translate"),b.Pb(),b.Pb(),b.Qb(26,"ion-col",10),b.Qb(27,"ion-button",11),b.Yb("click",(function(){return o.writeEvaluation()})),b.Lb(28,"ion-icon",12),b.Pb(),b.Qb(29,"p",8),b.vc(30),b.bc(31,"translate"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(32,"ion-list"),b.Qb(33,"ion-item"),b.vc(34),b.Pb(),b.Qb(35,"ion-item"),b.Qb(36,"p",13),b.vc(37),b.bc(38,"translate"),b.Pb(),b.Pb(),b.Qb(39,"ion-item",14),b.Yb("click",(function(){return o.displayAvis()})),b.Qb(40,"ion-col",15),b.Lb(41,"ion-icon",16),b.Pb(),b.Qb(42,"ion-col",17),b.Lb(43,"ionic5-star-rating",18,19),b.Pb(),b.Qb(45,"ion-col",20),b.uc(46,y,3,4,"span",21),b.Pb(),b.Pb(),b.uc(47,C,3,4,"ion-item",22),b.uc(48,w,6,4,"ion-item",22),b.uc(49,x,3,4,"ion-item",22),b.uc(50,L,3,4,"ion-item",22),b.uc(51,k,3,4,"ion-item",22),b.Qb(52,"ion-item"),b.vc(53),b.bc(54,"translate"),b.Pb(),b.Qb(55,"ion-item"),b.vc(56),b.bc(57,"translate"),b.Pb(),b.Qb(58,"ion-item"),b.vc(59),b.bc(60,"translate"),b.Pb(),b.Qb(61,"ion-item"),b.vc(62),b.bc(63,"translate"),b.Pb(),b.Qb(64,"ion-item"),b.Qb(65,"p",23),b.vc(66),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&t&&(b.zb(5),b.xc("",b.cc(6,25,o.product.Label)," "),b.zb(5),b.gc("ngForOf",o.product.ImagesPath),b.zb(1),b.gc("ngIf",null==o.product.ImagesPath||0==o.product.ImagesPath.length),b.zb(7),b.wc(b.cc(19,27,"product-detail.Favorite")),b.zb(6),b.wc(b.cc(25,29,"product-detail.Cart")),b.zb(6),b.wc(b.cc(31,31,"product-detail.Avis")),b.zb(4),b.xc(" ",o.product.Label," "),b.zb(3),b.yc("",b.cc(38,33,"product-detail.R\xe9f\xe9rence")," : ",o.product.ReferenceCode,""),b.zb(6),b.gc("rating",o.calculCommentAverageLevel()),b.zb(3),b.gc("ngIf",null!=o.product.Comments&&o.product.Comments.length>0),b.zb(1),b.gc("ngIf",o.logined),b.zb(1),b.gc("ngIf",o.logined&&null!=o.utils.formatProductPromotionInfo(o.product)),b.zb(1),b.gc("ngIf",null==o.product.QuantityPerParcel),b.zb(1),b.gc("ngIf",null!=o.product.QuantityPerParcel),b.zb(1),b.gc("ngIf",null!=o.product.QuantityPerParcel),b.zb(2),b.yc(" ",b.cc(54,35,"product-detail.Couleur"),": ",o.product.Color," "),b.zb(3),b.yc("",b.cc(57,37,"product-detail.Taille"),": ",o.product.Size,""),b.zb(3),b.yc("",b.cc(60,39,"product-detail.Material"),": ",o.product.Material,""),b.zb(3),b.yc("",b.cc(63,41,"product-detail.Forme"),": ",o.product.Forme,""),b.zb(4),b.xc("",o.product.Description," "))},directives:[e.t,e.V,e.i,e.e,e.f,e.U,e.q,e.N,c.j,c.k,e.H,e.p,e.h,e.u,e.B,e.z,P.a,e.M],pipes:[c.s,l.c],styles:[""]}),t})()}];let _=(()=>{class t{}return t.\u0275mod=b.Ib({type:t}),t.\u0275inj=b.Hb({factory:function(o){return new(o||t)},imports:[[r.j.forChild(F)],r.j]}),t})(),S=(()=>{class t{}return t.\u0275mod=b.Ib({type:t}),t.\u0275inj=b.Hb({factory:function(o){return new(o||t)},imports:[[c.b,n.g,e.W,_,l.b,P.b]]}),t})()}}]);