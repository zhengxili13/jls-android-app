!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=s(t);if(e){var r=s(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"K3/d":function(e,a,c){"use strict";c.r(a),c.d(a,"NewproductPageModule",(function(){return pt}));var l=c("ofXK"),u=c("3Pt+"),d=c("TEn/"),b=c("tyNb"),g=c("mrSG"),p=c("n3qt"),h=c("AytR"),f=c("fXoL"),P=c("sYmb"),v=c("MDGB"),y=c("kwrG");function m(t,e){if(1&t&&(f.Qb(0,"ion-select-option",21),f.vc(1),f.Pb()),2&t){var n=e.$implicit;f.gc("value",n.Id),f.zb(1),f.wc(n.Label)}}function L(t,e){if(1&t&&(f.Qb(0,"ion-select-option",21),f.vc(1),f.Pb()),2&t){var n=e.$implicit;f.gc("value",n.Id),f.zb(1),f.xc("",n.Label," ")}}function C(t,e){if(1&t&&(f.Qb(0,"ion-select-option",21),f.vc(1),f.Pb()),2&t){var n=e.$implicit,o=f.ac();f.gc("value",n),f.zb(1),f.xc("",o.translateOrderByItem(n)," ")}}var w,I=((w=function(e){r(c,e);var a=i(c);function c(e,n,o,r,i,s){var l;return t(this,c),(l=a.call(this)).navCtrl=e,l.translateService=n,l.rest=o,l.network=r,l.toastCtrl=i,l.modalCtrl=s,l.criteria={SearchText:null,MainCategory:null,SecondCategory:null,PriceInterval:{lower:0,upper:200},MinQuantity:200,OrderBy:null},l.ReferenceList=[],l.MainCategoryList=[],l.OrderByList=["Price_Increase","Price_Decrease","PublishDate_Recent","Porpularity_More"],l}return n(c,[{key:"ngOnInit",value:function(){console.log("ionViewDidLoad AdvancedSearchPage"),this.criteria=this.criteriaPassed||this.criteria,this.loadMainCategoryAndSecondCategory()}},{key:"translateOrderByItem",value:function(t){return this.translateService.instant("advanced-search."+t)}},{key:"loadMainCategoryAndSecondCategory",value:function(){var t=this;"none"!=this.network.type?this.rest.GetReferenceItemsByCategoryLabels({ShortLabels:["MainCategory","SecondCategory"],Lang:this.translateService.defaultLang}).subscribe((function(e){null!=e&&e.length>0&&(t.ReferenceList=e,t.MainCategoryList=e.filter((function(t){return"MainCategory"==t.ReferenceCategoryLabel})))}),(function(e){o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translateService.instant("Msg_Error"))})):o(s(c.prototype),"showToast",this).call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"))}},{key:"dismiss",value:function(){this.modalCtrl.dismiss()}},{key:"getSecondCategoryList",value:function(){var t=this;return null!=this.criteria.MainCategory?this.ReferenceList.filter((function(e){return e.ParentId==t.criteria.MainCategory})):[]}},{key:"search",value:function(){this.modalCtrl.dismiss(this.criteria)}}]),c}(p.a)).\u0275fac=function(t){return new(t||w)(f.Kb(d.ab),f.Kb(P.d),f.Kb(v.a),f.Kb(y.a),f.Kb(d.gb),f.Kb(d.Z))},w.\u0275cmp=f.Eb({type:w,selectors:[["app-advanced-search"]],inputs:{criteriaPassed:"criteriaPassed"},features:[f.wb],decls:66,vars:54,consts:[["slot","start"],[3,"click"],["ion-text","","color","primary","showWhen","ios"],["name","md-close","showWhen","android"],[2,"background-color","#fff!important"],[1,"headerZoom",2,"margin-left","10px","margin-right","2px"],["stacked",""],[1,"inputZoom",3,"ngModel","placeholder","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["multiple","true",3,"ngModel","ngModelChange"],["start","","slot","start"],["min","0","max","200","step","10",3,"ngModel","ngModelChange"],["range-left","","small","","name","cube"],["range-right","","name","cube"],["start","","position","stacked","slot","start"],["min","0","max","200","step","10","dualKnobs","true","pin","true",3,"ngModel","ngModelChange"],["range-left","","name","remove"],["range-right","","name","add"],["text-center",""],["color","primary",2,"width","100%","height","35px",3,"click"],[3,"value"]],template:function(t,e){1&t&&(f.Qb(0,"ion-header"),f.Qb(1,"ion-toolbar"),f.Qb(2,"ion-title"),f.vc(3),f.bc(4,"translate"),f.Pb(),f.Qb(5,"ion-buttons",0),f.Qb(6,"ion-button",1),f.Yb("click",(function(){return e.dismiss()})),f.Qb(7,"span",2),f.vc(8),f.bc(9,"translate"),f.Pb(),f.Lb(10,"ion-icon",3),f.Pb(),f.Pb(),f.Pb(),f.Pb(),f.Qb(11,"ion-content",4),f.Qb(12,"div",5),f.Qb(13,"h3"),f.vc(14),f.bc(15,"translate"),f.Pb(),f.Pb(),f.Qb(16,"ion-list"),f.Qb(17,"ion-item"),f.Qb(18,"ion-label",6),f.vc(19),f.bc(20,"translate"),f.Pb(),f.Qb(21,"ion-input",7),f.Yb("ngModelChange",(function(t){return e.criteria.SearchText=t})),f.bc(22,"translate"),f.Pb(),f.Pb(),f.Qb(23,"ion-item"),f.Qb(24,"ion-label"),f.vc(25),f.bc(26,"translate"),f.Pb(),f.Qb(27,"ion-select",8),f.Yb("ngModelChange",(function(t){return e.criteria.MainCategory=t})),f.uc(28,m,2,2,"ion-select-option",9),f.Pb(),f.Pb(),f.Qb(29,"ion-item"),f.Qb(30,"ion-label"),f.vc(31),f.bc(32,"translate"),f.Pb(),f.Qb(33,"ion-select",10),f.Yb("ngModelChange",(function(t){return e.criteria.SecondCategory=t})),f.uc(34,L,2,2,"ion-select-option",9),f.Pb(),f.Pb(),f.Qb(35,"ion-item"),f.Qb(36,"ion-label",11),f.vc(37),f.bc(38,"translate"),f.Pb(),f.Qb(39,"ion-range",12),f.Yb("ngModelChange",(function(t){return e.criteria.MinQuantity=t})),f.Lb(40,"ion-icon",13),f.Lb(41,"ion-icon",14),f.Pb(),f.Pb(),f.Qb(42,"ion-item"),f.Qb(43,"ion-label",15),f.vc(44),f.bc(45,"translate"),f.Pb(),f.Qb(46,"ion-range",16),f.Yb("ngModelChange",(function(t){return e.criteria.PriceInterval=t})),f.Lb(47,"ion-icon",17),f.Lb(48,"ion-icon",18),f.Pb(),f.Pb(),f.Pb(),f.Qb(49,"div",5),f.Qb(50,"h3"),f.vc(51),f.bc(52,"translate"),f.bc(53,"translate"),f.bc(54,"translate"),f.Pb(),f.Pb(),f.Qb(55,"ion-list"),f.Qb(56,"ion-item"),f.Qb(57,"ion-label"),f.vc(58),f.bc(59,"translate"),f.Pb(),f.Qb(60,"ion-select",8),f.Yb("ngModelChange",(function(t){return e.criteria.OrderBy=t})),f.uc(61,C,2,2,"ion-select-option",9),f.Pb(),f.Pb(),f.Pb(),f.Qb(62,"div",19),f.Qb(63,"ion-button",20),f.Yb("click",(function(){return e.search()})),f.vc(64),f.bc(65,"translate"),f.Pb(),f.Pb(),f.Pb()),2&t&&(f.zb(3),f.wc(f.cc(4,26,"advanced-search.advancedSearch")),f.zb(5),f.wc(f.cc(9,28,"signin.Return")),f.zb(6),f.wc(f.cc(15,30,"advanced-search.Criteresderecherche")),f.zb(5),f.wc(f.cc(20,32,"advanced-search.Votrerecherche")),f.zb(2),f.hc("placeholder",f.cc(22,34,"advanced-search.Motcle")),f.gc("ngModel",e.criteria.SearchText),f.zb(4),f.wc(f.cc(26,36,"advanced-search.Categories")),f.zb(2),f.gc("ngModel",e.criteria.MainCategory),f.zb(1),f.gc("ngForOf",e.MainCategoryList),f.zb(3),f.wc(f.cc(32,38,"advanced-search.SousCategories")),f.zb(2),f.gc("ngModel",e.criteria.SecondCategory),f.zb(1),f.gc("ngForOf",e.getSecondCategoryList()),f.zb(3),f.yc("",f.cc(38,40,"advanced-search.Minquantitedachat"),": ",e.criteria.MinQuantity,""),f.zb(2),f.gc("ngModel",e.criteria.MinQuantity),f.zb(5),f.zc("",f.cc(45,42,"advanced-search.Prix"),": ",e.criteria.PriceInterval.lower," - ",e.criteria.PriceInterval.upper," \u20ac"),f.zb(2),f.gc("ngModel",e.criteria.PriceInterval),f.zb(5),f.zc("",f.cc(52,44,"advanced-search.Prix"),", ",f.cc(53,46,"advanced-search.Nouveaute")," , ",f.cc(54,48,"advanced-search.Popularite")," "),f.zb(7),f.xc("",f.cc(59,50,"advanced-search.Trierpar")," "),f.zb(2),f.gc("ngModel",e.criteria.OrderBy),f.zb(1),f.gc("ngForOf",e.OrderByList),f.zb(3),f.xc("",f.cc(65,52,"advanced-search.Search")," "))},directives:[d.t,d.V,d.U,d.i,d.h,d.u,d.q,d.B,d.z,d.A,d.y,d.fb,u.k,u.n,d.J,d.eb,l.j,d.F,d.K],pipes:[P.c],styles:[""]}),w),Q=c("Kj3r"),M=c("e8h1"),z=c("x7k0"),x=c("/NBf");function S(t,e){if(1&t){var n=f.Rb();f.Qb(0,"ion-buttons",2),f.Qb(1,"ion-button",3),f.Yb("click",(function(){return f.nc(n),f.ac().advancedSearchPage()})),f.Lb(2,"ion-icon",10),f.Pb(),f.Pb()}}function T(t,e){if(1&t&&(f.Qb(0,"div",23),f.vc(1),f.Pb()),2&t){var n=f.ac().$implicit,o=f.ac(2);f.zb(1),f.xc(" ",o.utils.formatProductPromotionInfo(n).discountPerCent,"% ")}}function _(t,e){1&t&&(f.Qb(0,"div",24),f.vc(1),f.bc(2,"translate"),f.Pb()),2&t&&(f.zb(1),f.xc(" ",f.cc(2,1,"home.New")," "))}function k(t,e){1&t&&f.Lb(0,"img",25)}function O(t,e){if(1&t&&f.Lb(0,"ion-img",26),2&t){var n=f.ac().$implicit,o=f.ac(2);f.gc("src",o.host+n.DefaultPhotoPath)}}function D(t,e){if(1&t&&(f.Qb(0,"p",27),f.vc(1),f.Qb(2,"span",28),f.vc(3,"\u20ac"),f.Pb(),f.vc(4,"(HT) "),f.Pb()),2&t){var n=f.ac().$implicit;f.zb(1),f.xc(" ",n.PreviousPrice," "),f.zb(1),f.gc("hidden",n.Price==n.PreviousPrice)}}function E(t,e){if(1&t&&(f.Qb(0,"p",29),f.vc(1),f.Qb(2,"span",28),f.vc(3,"\u20ac"),f.Pb(),f.vc(4,"(HT) "),f.Pb()),2&t){var n=f.ac().$implicit;f.zb(1),f.xc("",n.Price," "),f.zb(1),f.gc("hidden",null==n.Price)}}function B(t,e){if(1&t){var n=f.Rb();f.Qb(0,"ion-item",12),f.Yb("click",(function(){f.nc(n);var t=e.$implicit;return f.ac(2).productDetail(t)})),f.Qb(1,"ion-avatar",13),f.uc(2,T,2,1,"div",14),f.uc(3,_,3,3,"div",15),f.uc(4,k,1,0,"img",16),f.uc(5,O,1,1,"ion-img",17),f.Pb(),f.Qb(6,"ion-label"),f.uc(7,D,5,2,"p",18),f.uc(8,E,5,2,"p",19),f.Qb(9,"h2",20),f.vc(10),f.Pb(),f.Qb(11,"p"),f.vc(12),f.bc(13,"translate"),f.Pb(),f.Qb(14,"p"),f.vc(15),f.bc(16,"translate"),f.Pb(),f.Qb(17,"span",21),f.Yb("click",(function(t){f.nc(n);var o=e.$implicit;return f.ac(2).addInCart(t,o)})),f.Lb(18,"ion-icon",22),f.Pb(),f.Qb(19,"p"),f.vc(20),f.bc(21,"translate"),f.Pb(),f.Pb(),f.Pb()}if(2&t){var o=e.$implicit,r=f.ac(2);f.zb(2),f.gc("ngIf",r.logined&&null!=r.utils.formatProductPromotionInfo(o)),f.zb(1),f.gc("ngIf",o.IsNew),f.zb(1),f.gc("ngIf",null==o.DefaultPhotoPath),f.zb(1),f.gc("ngIf",null!=o.DefaultPhotoPath),f.zb(2),f.gc("ngIf",r.logined&&null!=r.utils.formatProductPromotionInfo(o)),f.zb(1),f.gc("ngIf",r.logined),f.zb(1),f.gc("id",o.ReferenceId),f.zb(1),f.wc(o.Label),f.zb(2),f.yc("",f.cc(13,14,"newproduct.QuantityEachBox")," : ",o.QuantityPerBox,""),f.zb(3),f.yc("",f.cc(16,16,"newproduct.QuantityMinimum")," : ",o.MinQuantity,""),f.zb(5),f.yc("",f.cc(21,18,"newproduct.Reference")," : ",o.Code,"")}}function R(t,e){if(1&t&&(f.Qb(0,"ion-list"),f.uc(1,B,22,20,"ion-item",11),f.Pb()),2&t){var n=f.ac();f.zb(1),f.gc("ngForOf",n.productList)}}function j(t,e){if(1&t&&(f.Qb(0,"div",45),f.vc(1),f.Pb()),2&t){var n=f.ac().$implicit,o=f.ac(2);f.zb(1),f.xc(" ",o.utils.formatProductPromotionInfo(n).discountPerCent,"% ")}}function $(t,e){1&t&&(f.Qb(0,"div",46),f.vc(1),f.bc(2,"translate"),f.Pb()),2&t&&(f.zb(1),f.xc(" ",f.cc(2,1,"home.New")," "))}function K(t,e){1&t&&f.Lb(0,"ion-img",47)}function F(t,e){if(1&t&&f.Lb(0,"img",48),2&t){var n=f.ac().$implicit,o=f.ac(2);f.gc("src",o.host+n.DefaultPhotoPath,f.pc)}}function A(t,e){if(1&t&&(f.Qb(0,"ion-card-subtitle"),f.vc(1),f.bc(2,"translate"),f.Pb()),2&t){var n=f.ac().$implicit;f.zb(1),f.yc("",f.cc(2,2,"cart.QuantityPerParcel")," : ",n.QuantityPerBox,"")}}function N(t,e){if(1&t&&(f.Qb(0,"ion-card-subtitle"),f.vc(1),f.bc(2,"translate"),f.Pb()),2&t){var n=f.ac().$implicit;f.zb(1),f.yc("",f.cc(2,2,"cart.QuantityPerParcel")," : ",n.QuantityPerParcel,"")}}function Y(t,e){if(1&t&&(f.Qb(0,"ion-card-subtitle"),f.vc(1),f.bc(2,"translate"),f.Pb()),2&t){var n=f.ac().$implicit;f.zb(1),f.yc("",f.cc(2,2,"cart.EachBox")," : ",n.QuantityPerBox,"")}}function G(t,e){if(1&t&&(f.Qb(0,"p",49),f.vc(1),f.Qb(2,"span",28),f.vc(3,"\u20ac"),f.Pb(),f.vc(4,"(HT) "),f.Pb()),2&t){var n=f.ac().$implicit;f.zb(1),f.xc(" ",n.PreviousPrice," "),f.zb(1),f.gc("hidden",n.Price==n.PreviousPrice)}}function q(t,e){if(1&t&&(f.Qb(0,"p",50),f.vc(1),f.Qb(2,"span",28),f.vc(3,"\u20ac"),f.Pb(),f.vc(4,"(HT) "),f.Pb()),2&t){var n=f.ac().$implicit;f.zb(1),f.xc("",n.Price," "),f.zb(1),f.gc("hidden",null==n.Price)}}function V(t,e){if(1&t){var n=f.Rb();f.Qb(0,"ion-col",31),f.Yb("click",(function(){f.nc(n);var t=e.$implicit;return f.ac(2).productDetail(t)})),f.Qb(1,"ion-card",32),f.Qb(2,"div",33),f.uc(3,j,2,1,"div",34),f.uc(4,$,3,3,"div",35),f.Pb(),f.uc(5,K,1,0,"ion-img",36),f.uc(6,F,1,1,"img",37),f.Qb(7,"ion-button",38),f.Yb("click",(function(t){f.nc(n);var o=e.$implicit;return f.ac(2).addInCart(t,o)})),f.Lb(8,"ion-icon",39),f.vc(9),f.bc(10,"translate"),f.Pb(),f.Qb(11,"ion-card-header",40),f.Qb(12,"ion-card-title",41),f.vc(13),f.Pb(),f.Qb(14,"ion-card-subtitle"),f.vc(15),f.bc(16,"translate"),f.Pb(),f.uc(17,A,3,4,"ion-card-subtitle",5),f.uc(18,N,3,4,"ion-card-subtitle",5),f.uc(19,Y,3,4,"ion-card-subtitle",5),f.Pb(),f.Qb(20,"ion-card-content",42),f.uc(21,G,5,2,"p",43),f.uc(22,q,5,2,"p",44),f.Pb(),f.Pb(),f.Pb()}if(2&t){var o=e.$implicit,r=f.ac(2);f.zb(3),f.gc("ngIf",r.logined&&null!=r.utils.formatProductPromotionInfo(o)),f.zb(1),f.gc("ngIf",o.IsNew),f.zb(1),f.gc("ngIf",null==o.DefaultPhotoPath),f.zb(1),f.gc("ngIf",null!=o.DefaultPhotoPath),f.zb(3),f.xc("",f.cc(10,13,"Add")," "),f.zb(4),f.wc(o.Label),f.zb(2),f.yc("",f.cc(16,15,"newproduct.Reference")," : ",o.Code,""),f.zb(2),f.gc("ngIf",null==o.QuantityPerParcel),f.zb(1),f.gc("ngIf",null!=o.QuantityPerParcel),f.zb(1),f.gc("ngIf",null!=o.QuantityPerParcel),f.zb(2),f.gc("ngIf",r.logined&&null!=r.utils.formatProductPromotionInfo(o)),f.zb(1),f.gc("ngIf",r.logined)}}function H(t,e){if(1&t&&(f.Qb(0,"ion-row"),f.uc(1,V,23,17,"ion-col",30),f.Pb()),2&t){var n=f.ac();f.zb(1),f.gc("ngForOf",n.productList)}}function U(t,e){if(1&t&&f.Lb(0,"ion-searchbar",53),2&t){var n=f.ac(2);f.gc("formControl",n.searchControl)}}function W(t,e){if(1&t&&(f.Qb(0,"div",45),f.vc(1),f.Pb()),2&t){var n=f.ac().$implicit,o=f.ac(2);f.zb(1),f.xc(" ",o.utils.formatProductPromotionInfo(n).discountPerCent,"% ")}}function Z(t,e){1&t&&(f.Qb(0,"div",46),f.vc(1),f.bc(2,"translate"),f.Pb()),2&t&&(f.zb(1),f.xc(" ",f.cc(2,1,"home.New")," "))}function J(t,e){1&t&&f.Lb(0,"ion-img",58)}function X(t,e){if(1&t&&f.Lb(0,"img",59),2&t){var n=f.ac().$implicit,o=f.ac(2);f.gc("src",o.host+n.DefaultPhotoPath,f.pc)}}function tt(t,e){if(1&t){var n=f.Rb();f.Qb(0,"ion-col",54),f.Yb("click",(function(){f.nc(n);var t=e.$implicit;return f.ac(2).productDetail(t)})),f.Qb(1,"div",55),f.Qb(2,"div",33),f.uc(3,W,2,1,"div",34),f.uc(4,Z,3,3,"div",35),f.Pb(),f.uc(5,J,1,0,"ion-img",56),f.uc(6,X,1,1,"img",57),f.Pb(),f.Pb()}if(2&t){var o=e.$implicit,r=f.ac(2);f.zb(3),f.gc("ngIf",r.logined&&null!=r.utils.formatProductPromotionInfo(o)),f.zb(1),f.gc("ngIf",o.IsNew),f.zb(1),f.gc("ngIf",null==o.DefaultPhotoPath),f.zb(1),f.gc("ngIf",null!=o.DefaultPhotoPath)}}function et(t,e){if(1&t&&(f.Qb(0,"div"),f.uc(1,U,1,1,"ion-searchbar",51),f.Qb(2,"ion-row"),f.uc(3,tt,7,4,"ion-col",52),f.Pb(),f.Pb()),2&t){var n=f.ac();f.zb(1),f.gc("ngIf","ViewAllProduct"==n.PageType),f.zb(2),f.gc("ngForOf",n.productList)}}function nt(t,e){1&t&&(f.Qb(0,"div",60),f.Lb(1,"ion-spinner"),f.Qb(2,"p",61),f.vc(3),f.bc(4,"translate"),f.Pb(),f.Pb()),2&t&&(f.zb(3),f.xc("",f.cc(4,1,"Loading"),"..."))}function ot(t,e){1&t&&(f.Qb(0,"p",62),f.vc(1),f.bc(2,"translate"),f.Pb()),2&t&&(f.zb(1),f.xc(" ",f.cc(2,1,"NoDataToDisplay"),""))}var rt,at,it,ct,st,lt=[{path:"",component:(rt=function(e){r(c,e);var a=i(c);function c(e,n,o,r,i,s,l,d,b,g){var p;return t(this,c),(p=a.call(this)).router=e,p.navCtrl=n,p.network=o,p.rest=r,p.toastCtrl=i,p.storage=s,p.utils=l,p.modalCtrl=d,p.translate=b,p.cartService=g,p.loading=!0,p.SecondReferenceId=0,p.Title="",p.productList=[],p.step=10,p.counter=0,p.listLayoutMode=["column","imangeOnly","list"],p.layoutMode="column",p.advancedSearchCriteria={SearchText:null,MainCategory:null,SecondCategory:null,PriceInterval:{lower:0,upper:200},MinQuantity:200,OrderBy:null},p.host=h.a.SERVER_API_URL,p.logined=!1,p.searchControl=new u.c,p}return n(c,[{key:"ngOnInit",value:function(){this.checkLogined(),this.PageType=this.router.snapshot.queryParams.PageType,this.SecondReferenceId=parseInt(this.router.snapshot.queryParams.ReferenceId),this.Title=this.router.snapshot.queryParams.Title;var t=localStorage.getItem("productListLayoutType");null!=this.listLayoutMode.find((function(e){return e==t}))&&(this.layoutMode=t),"ViewAllProduct"==this.PageType&&(this.advancedSearchCriteria.OrderBy="PublishDate_Recent",this.layoutMode="imangeOnly"),"imangeOnly"==this.layoutMode?this.imageOnlyTreatement():this.loadProductList()}},{key:"toggleLayout",value:function(){var t=this,e=this.listLayoutMode.findIndex((function(e){return e==t.layoutMode}));this.layoutMode=e+1>=this.listLayoutMode.length?this.listLayoutMode[0]:this.listLayoutMode[e+1],this.imageOnlyTreatement(),localStorage.setItem("productListLayoutType",this.layoutMode)}},{key:"imageOnlyTreatement",value:function(){var t=this;"imangeOnly"==this.layoutMode&&(this.counter=0,this.step=20,this.loadProductList(),"ViewAllProduct"==this.PageType&&this.searchControl.valueChanges.pipe(Object(Q.a)(500)).subscribe((function(e){t.counter=0,t.advancedSearchCriteria.SearchText=e,t.loadProductList()})))}},{key:"ionViewWillEnter",value:function(){}},{key:"productDetail",value:function(t){this.navCtrl.navigateForward("ProductDetailPage",{queryParams:{productId:t.ProductId}})}},{key:"checkLogined",value:function(){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.utils.checkIsLogined();case 2:this.logined=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"loadProductList",value:function(){var t=this;if(null!=this.PageType)switch(this.PageType){case"BySecondCategory":this.rest.GetProductListBySecondCategory(this.SecondReferenceId,this.counter,this.step).subscribe((function(e){e.Success&&null!=e.Data?t.productList=e.Data.ProductListData:o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(e){t.loading=!1,o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(){return t.loading=!1}));break;case"NewProduct":this.rest.GetProductListByPublishDate(this.counter,this.step).subscribe((function(e){e.Success&&null!=e.Data?t.productList=e.Data.ProductListData:o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(e){o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(){return t.loading=!1}));break;case"PromoProduct":this.rest.GetPromotionProduct(this.counter,this.step).subscribe((function(e){null!=e.ProductList?t.productList=e.ProductList:o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(e){o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(){return t.loading=!1}));break;case"BestSalesProduct":this.rest.GetProductListBySalesPerformance(this.counter,this.step).subscribe((function(e){e.Success&&null!=e.Data?t.productList=e.Data.ProductListData:o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(e){o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(){return t.loading=!1}));break;case"FavoriteList":this.rest.GetFavoriteListByUserId({UserId:localStorage.getItem("userId"),Lang:this.translate.defaultLang,Begin:this.counter,Step:this.step}).subscribe((function(e){null!=e&&null!=e.TotalCount&&null!=e.List?t.productList=e.List:o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(e){o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}));break;case"SimpleProductSearch":this.rest.SimpleProductSearch({SearchText:this.router.snapshot.queryParams.SearchText,Lang:this.translate.defaultLang,Begin:this.counter,Step:this.step}).subscribe((function(e){null!=e&&null!=e.TotalCount&&null!=e.List?t.productList=e.List:o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(e){o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}));break;case"LowerPriceProduct":this.rest.GetProductByPrice({Lang:this.translate.defaultLang,Step:this.step,Begin:this.counter}).subscribe((function(e){null!=e&&null!=e.TotalCount&&null!=e.List?t.productList=e.List:o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(e){o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}));break;case"ViewAllProduct":case"AdvancedProductSearch":if(this.loading=!0,null!=this.advancedSearchCriteria){var e=this.advancedSearchCriteria;e.Begin=this.counter,e.Step=this.step,e.Lang=this.translate.defaultLang,e.PriceIntervalLower=this.advancedSearchCriteria.PriceInterval.lower,e.PriceIntervalUpper=this.advancedSearchCriteria.PriceInterval.upper,this.rest.AdvancedProductSearchClient(e).subscribe((function(e){null!=e&&null!=e.TotalCount&&null!=e.List?t.productList=e.List:o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(e){o(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}))}else this.loading=!1}else o(s(c.prototype),"showToast",this).call(this,this.toastCtrl,this.translate.instant("Msg_Offline"))}},{key:"doInfinite",value:function(t){var e=this;if("none"!=this.network.type)switch(this.counter=this.counter+1,this.PageType){case"BySecondCategory":this.rest.GetProductListBySecondCategory(this.SecondReferenceId,this.counter,this.step).subscribe((function(n){n.Success?n.Data.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.Data.ProductListData?n.Data.ProductListData:[]),t.target.complete()):o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"PromoProduct":this.rest.GetPromotionProduct(this.counter,this.step).subscribe((function(n){null!=n.ProductList?n.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.ProductList?n.ProductList:[]),t.target.complete()):o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"NewProduct":this.rest.GetProductListByPublishDate(this.counter,this.step).subscribe((function(n){n.Success?n.Data.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.Data.ProductListData?n.Data.ProductListData:[]),t.target.complete()):o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"BestSalesProduct":this.rest.GetProductListBySalesPerformance(this.counter,this.step).subscribe((function(n){n.Success?n.Data.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.Data.ProductListData?n.Data.ProductListData:[]),t.target.complete()):o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"FavoriteList":this.rest.GetFavoriteListByUserId({UserId:localStorage.getItem("userId"),Lang:this.translate.defaultLang,Begin:this.counter,Step:this.step}).subscribe((function(n){null!=n&&null!=n.TotalCount&&null!=n.List?n.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.List?n.List:[]),t.target.complete()):o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"LowerPriceProduct":this.rest.GetProductByPrice({Lang:this.translate.defaultLang,Step:this.step,Begin:this.counter}).subscribe((function(n){null!=n&&null!=n.TotalCount&&null!=n.List?n.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.List?n.List:[]),t.target.complete()):o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"SimpleProductSearch":this.rest.SimpleProductSearch({SearchText:this.router.snapshot.queryParams.SearchText,Lang:this.translate.defaultLang,Begin:this.counter,Step:this.step}).subscribe((function(n){null!=n&&null!=n.TotalCount&&null!=n.List?n.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.List?n.List:[]),t.target.complete()):o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"ViewAllProduct":case"AdvancedProductSearch":if(null!=this.advancedSearchCriteria){var n=this.advancedSearchCriteria;n.Begin=this.counter,n.Step=this.step,n.Lang=this.translate.defaultLang,this.rest.AdvancedProductSearchClient(n).subscribe((function(n){null!=n&&null!=n.TotalCount&&null!=n.List?n.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.List?n.List:[]),t.target.complete()):o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){o(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}))}}else o(s(c.prototype),"showToast",this).call(this,this.toastCtrl,this.translate.instant("Msg_Offline"))}},{key:"advancedSearchPage",value:function(){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:I,componentProps:{criteriaPassed:this.advancedSearchCriteria}});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.next=7,e.onWillDismiss();case 7:n=t.sent,null!=(o=n.data)&&(this.advancedSearchCriteria=o,this.loadProductList());case 10:case"end":return t.stop()}}),t,this)})))}},{key:"addInCart",value:function(t,e){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.stopPropagation(),this.cartService.addInCart(e);case 1:case"end":return n.stop()}}),n,this)})))}}]),c}(p.a),rt.\u0275fac=function(t){return new(t||rt)(f.Kb(b.a),f.Kb(d.ab),f.Kb(y.a),f.Kb(v.a),f.Kb(d.gb),f.Kb(M.b),f.Kb(z.a),f.Kb(d.Z),f.Kb(P.d),f.Kb(x.a))},rt.\u0275cmp=f.Eb({type:rt,selectors:[["app-newproduct"]],features:[f.wb],decls:18,vars:7,consts:[["slot","start"],["slot","end",4,"ngIf"],["slot","end"],["icon-only","","small","",3,"click"],["name","menu"],[4,"ngIf"],["class","ion-text-center spinner ion-margin-top",4,"ngIf"],["class","ion-text-center",4,"ngIf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading"],["name","search",1,"searchButtonColor"],["button","","detail","false",3,"click",4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],["slot","start",2,"width","60px","height","60px"],["class","product-card__badge promotion","style","position: absolute;",4,"ngIf"],["class","product-card__badge_New promotion","style","position: absolute; top: 10px; left: 10px;",4,"ngIf"],["class","productImg","src","assets/imgs/not-found.png",4,"ngIf"],["class","productImg",3,"src",4,"ngIf"],["style","text-decoration:line-through;float: right; margin-top: 25px;",4,"ngIf"],["style","font-weight: bold;font-size: 16px;float: right; margin-top: 25px;",4,"ngIf"],[1,"productLabelClass",3,"id"],["slot","icon-only","icon-only","","float-right","",1,"ion-float-right",2,"font-size","1em","padding","1px 0px",3,"click"],["name","cart","slot","icon-only"],[1,"product-card__badge","promotion",2,"position","absolute"],[1,"product-card__badge_New","promotion",2,"position","absolute","top","10px","left","10px"],["src","assets/imgs/not-found.png",1,"productImg"],[1,"productImg",3,"src"],[2,"text-decoration","line-through","float","right","margin-top","25px"],[3,"hidden"],[2,"font-weight","bold","font-size","16px","float","right","margin-top","25px"],["size","6",3,"click",4,"ngFor","ngForOf"],["size","6",3,"click"],["button","true",1,"ion-no-margin","productCard"],[1,"product-card__badges-list"],["class","product-card__badge promotion",4,"ngIf"],["class","product-card__badge_New promotion",4,"ngIf"],["src","assets/imgs/not-found.png","style","height: 20vh;",4,"ngIf"],["style","height: 20vh;",3,"src",4,"ngIf"],["expand","full","size","small",3,"click"],["slot","start","name","cart"],[1,"ion-padding",2,"padding-bottom","0px"],[2,"font-size","16px"],[1,"productCardContent",2,"padding-bottom","5px"],["style","text-decoration:line-through;",4,"ngIf"],["style","font-weight: bold;font-size: 16px;",4,"ngIf"],[1,"product-card__badge","promotion"],[1,"product-card__badge_New","promotion"],["src","assets/imgs/not-found.png",2,"height","20vh"],[2,"height","20vh",3,"src"],[2,"text-decoration","line-through"],[2,"font-weight","bold","font-size","16px"],[3,"formControl",4,"ngIf"],["size","4","style","padding: 0 2px;",3,"click",4,"ngFor","ngForOf"],[3,"formControl"],["size","4",2,"padding","0 2px",3,"click"],[2,"text-align","center"],["src","assets/imgs/not-found.png","style","height: 16vh;",4,"ngIf"],["style","height: 16vh;",3,"src",4,"ngIf"],["src","assets/imgs/not-found.png",2,"height","16vh"],[2,"height","16vh",3,"src"],[1,"ion-text-center","spinner","ion-margin-top"],["text-center","","font-size-small","",1,"ion-text-center"],[1,"ion-text-center"]],template:function(t,e){1&t&&(f.Qb(0,"ion-header"),f.Qb(1,"ion-toolbar"),f.Qb(2,"ion-title"),f.vc(3),f.Pb(),f.Qb(4,"ion-buttons",0),f.Lb(5,"ion-back-button"),f.Pb(),f.uc(6,S,3,0,"ion-buttons",1),f.Qb(7,"ion-buttons",2),f.Qb(8,"ion-button",3),f.Yb("click",(function(){return e.toggleLayout()})),f.Lb(9,"ion-icon",4),f.Pb(),f.Pb(),f.Pb(),f.Pb(),f.Qb(10,"ion-content"),f.uc(11,R,2,1,"ion-list",5),f.uc(12,H,2,1,"ion-row",5),f.uc(13,et,4,2,"div",5),f.uc(14,nt,5,3,"div",6),f.uc(15,ot,3,3,"p",7),f.Qb(16,"ion-infinite-scroll",8),f.Yb("ionInfinite",(function(t){return e.doInfinite(t)})),f.Lb(17,"ion-infinite-scroll-content",9),f.Pb(),f.Pb()),2&t&&(f.zb(3),f.wc(e.Title),f.zb(3),f.gc("ngIf","AdvancedProductSearch"==e.PageType),f.zb(5),f.gc("ngIf","list"==e.layoutMode),f.zb(1),f.gc("ngIf","column"==e.layoutMode),f.zb(1),f.gc("ngIf","imangeOnly"==e.layoutMode),f.zb(1),f.gc("ngIf",e.loading),f.zb(1),f.gc("ngIf",!e.loading&&(null==e.productList||e.productList.length<=0)))},directives:[d.t,d.V,d.U,d.i,d.e,d.f,l.k,d.h,d.u,d.q,d.w,d.x,d.B,l.j,d.z,d.d,d.A,d.v,d.H,d.p,d.j,d.l,d.n,d.m,d.k,d.I,d.fb,u.k,u.d,d.O],pipes:[P.c],styles:[".productImg[_ngcontent-%COMP%]{border-radius:0!important;height:60px!important;width:60px!important}.productLabelClass[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.productCard[_ngcontent-%COMP%]{max-height:100%;min-height:100%;border:1px solid hsla(0,0%,69%,.41)}"]}),rt)}],ut=((at=function e(){t(this,e)}).\u0275mod=f.Ib({type:at}),at.\u0275inj=f.Hb({factory:function(t){return new(t||at)},imports:[[b.j.forChild(lt)],b.j]}),at),dt=[{path:"",component:I}],bt=((st=function e(){t(this,e)}).\u0275mod=f.Ib({type:st}),st.\u0275inj=f.Hb({factory:function(t){return new(t||st)},imports:[[b.j.forChild(dt)],b.j]}),st),gt=((ct=function e(){t(this,e)}).\u0275mod=f.Ib({type:ct}),ct.\u0275inj=f.Hb({factory:function(t){return new(t||ct)},imports:[[l.b,u.g,d.W,bt,P.b]]}),ct),pt=((it=function e(){t(this,e)}).\u0275mod=f.Ib({type:it}),it.\u0275inj=f.Hb({factory:function(t){return new(t||it)},imports:[[l.b,u.g,u.q,d.W,ut,P.b,gt]]}),it)}}])}();