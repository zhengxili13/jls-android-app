!function(){function t(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function o(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,o,n){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,o,e){var n=function(t,o){for(;!Object.prototype.hasOwnProperty.call(t,o)&&null!==(t=r(t)););return t}(t,o);if(n){var c=Object.getOwnPropertyDescriptor(n,o);return c.get?c.get.call(e):c.value}})(t,o,n||t)}function n(t,o){return(n=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}function c(t){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=r(t);if(o){var c=r(this).constructor;e=Reflect.construct(n,arguments,c)}else e=n.apply(this,arguments);return i(this,e)}}function i(t,o){return!o||"object"!=typeof o&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):o}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"6hUG":function(i,a,s){"use strict";s.r(a),s.d(a,"ProductDetailPageModule",(function(){return M}));var u=s("ofXK"),l=s("3Pt+"),b=s("TEn/"),d=s("tyNb"),p=s("mrSG"),f=s("n3qt"),g=s("AytR"),h=s("fXoL"),v=s("sYmb"),m=s("e8h1"),P=s("x7k0"),y=s("MDGB"),I=s("kwrG"),Q=s("/NBf"),w=s("j7Is");function z(t,o){if(1&t&&(h.Qb(0,"div",28),h.vc(1),h.Pb()),2&t){var e=h.ac(2);h.zb(1),h.xc(" ",e.utils.formatProductPromotionInfo(e.product).discountPerCent,"% ")}}function C(t,o){1&t&&(h.Qb(0,"div",29),h.vc(1),h.bc(2,"translate"),h.Pb()),2&t&&(h.zb(1),h.xc(" ",h.cc(2,1,"home.New")," "))}function k(t,o){if(1&t&&h.Lb(0,"img",30),2&t){var e=h.ac().$implicit,n=h.ac();h.gc("src",n.host+e.Path,h.pc)}}function x(t,o){if(1&t&&(h.Qb(0,"ion-slide"),h.Qb(1,"div",24),h.uc(2,z,2,1,"div",25),h.uc(3,C,3,3,"div",26),h.Pb(),h.uc(4,k,1,1,"img",27),h.Pb()),2&t){var e=o.$implicit,n=h.ac();h.zb(2),h.gc("ngIf",n.logined&&null!=n.utils.formatProductPromotionInfo(n.product)),h.zb(1),h.gc("ngIf",n.product.IsNew),h.zb(1),h.gc("ngIf",e.Path)}}function _(t,o){1&t&&h.Lb(0,"img",31)}function L(t,o){if(1&t){var e=h.Rb();h.Qb(0,"span",32),h.Yb("click",(function(){return h.nc(e),h.ac().displayAvis()})),h.vc(1),h.bc(2,"translate"),h.Pb()}if(2&t){var n=h.ac();h.zb(1),h.yc("(",n.product.Comments.length," ",h.cc(2,2,"product-detail.avis"),")")}}function F(t,o){if(1&t&&(h.Qb(0,"ion-item"),h.vc(1),h.bc(2,"translate"),h.Pb()),2&t){var e=h.ac();h.zb(1),h.yc(" ",h.cc(2,2,"product-detail.Price")," :",e.product.Price," \u20ac (HT) ")}}function O(t,o){if(1&t&&(h.Qb(0,"ion-item"),h.vc(1),h.bc(2,"translate"),h.Qb(3,"span",33),h.vc(4),h.Pb(),h.vc(5,"(HT) "),h.Pb()),2&t){var e=h.ac();h.zb(1),h.xc(" ",h.cc(2,2,"product-detail.OriginalPrice")," :"),h.zb(3),h.xc("",e.product.PreviousPrice," \u20ac")}}function R(t,o){if(1&t&&(h.Qb(0,"ion-item"),h.vc(1),h.bc(2,"translate"),h.Pb()),2&t){var e=h.ac();h.zb(1),h.yc(" ",h.cc(2,2,"cart.QuantityPerParcel")," : ",e.product.QuantityPerBox," ")}}function j(t,o){if(1&t&&(h.Qb(0,"ion-item"),h.vc(1),h.bc(2,"translate"),h.Pb()),2&t){var e=h.ac();h.zb(1),h.yc(" ",h.cc(2,2,"cart.QuantityPerParcel")," : ",e.product.QuantityPerParcel," ")}}function S(t,o){if(1&t&&(h.Qb(0,"ion-item"),h.vc(1),h.bc(2,"translate"),h.Pb()),2&t){var e=h.ac();h.zb(1),h.yc(" ",h.cc(2,2,"cart.EachBox")," : ",e.product.QuantityPerBox," ")}}var E,T,A,B=[{path:"",component:(E=function(i){!function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&n(t,o)}(b,i);var a,s,u,l=c(b);function b(o,e,n,c,i,r,a,s,u){var d;return t(this,b),(d=l.call(this)).navCtrl=o,d.translateService=e,d.storage=n,d.utils=c,d.rest=i,d.network=r,d.toastCtrl=a,d.router=s,d.cartService=u,d.isFavorite=!1,d.hasBought=!1,d.logined=!1,d.product={},d.host=g.a.SERVER_API_URL,d}return a=b,(s=[{key:"ngOnInit",value:function(){console.log("ionViewDidLoad ProductDetailPage"),this.productId=this.router.snapshot.queryParams.productId,this.checkLogined(),this.initLoadData()}},{key:"addProductIntoFavoriteList",value:function(){var t=this;this.logined?(this.isFavorite=!this.isFavorite,"none"!=this.network.type?this.rest.AddIntoProductFavoriteList({UserId:localStorage.getItem("userId"),ProductId:this.product.ProductId,IsFavorite:this.isFavorite}).subscribe((function(o){null!=o&&o>0&&e(r(b.prototype),"showToast",t).call(t,t.toastCtrl,t.translateService.instant(0==t.isFavorite?"Msg_RemoveIntoFavoriteList":"Msg_AddFavoriteList"))}),(function(o){e(r(b.prototype),"showToast",t).call(t,t.toastCtrl,o.Msg)})):e(r(b.prototype),"showToast",this).call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"))):e(r(b.prototype),"showToast",this).call(this,this.toastCtrl,this.translateService.instant("Msg_NotConnected"))}},{key:"writeEvaluation",value:function(){this.logined?this.hasBought?this.navCtrl.navigateForward("WriteProductEvaluationPage",{queryParams:{productId:this.productId}}):e(r(b.prototype),"showToast",this).call(this,this.toastCtrl,this.translateService.instant("Msg_CantComment")):e(r(b.prototype),"showToast",this).call(this,this.toastCtrl,this.translateService.instant("Msg_NotConnected"))}},{key:"calculCommentAverageLevel",value:function(){var t=5;if(null!=this.product&&null!=this.product.Comments&&this.product.Comments.length>0){var o=0;this.product.Comments.forEach((function(t){o=t.Level+o})),t=o/this.product.Comments.length}return t}},{key:"initLoadData",value:function(){var t=this;null!=this.productId&&0!=this.productId&&this.rest.GetProductById(this.productId).subscribe((function(o){null!=o&&(console.log(o),t.product=o,t.isFavorite=o.IsFavorite,t.hasBought=o.HasBought)}),(function(t){}))}},{key:"checkLogined",value:function(){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.utils.checkIsLogined();case 2:this.logined=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"displayAvis",value:function(){null!=this.product.Comments&&this.product.Comments.length>0&&this.navCtrl.navigateForward("ProductEvaluationListPage",{queryParams:{type:"GetCommentByProductId",productId:this.productId}})}},{key:"addInCart",value:function(t,o){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),this.cartService.addInCart(o);case 1:case"end":return e.stop()}}),e,this)})))}}])&&o(a.prototype,s),u&&o(a,u),b}(f.a),E.\u0275fac=function(t){return new(t||E)(h.Kb(b.ab),h.Kb(v.d),h.Kb(m.b),h.Kb(P.a),h.Kb(y.a),h.Kb(I.a),h.Kb(b.gb),h.Kb(d.a),h.Kb(Q.a))},E.\u0275cmp=h.Eb({type:E,selectors:[["app-product-detail"]],features:[h.wb],decls:67,vars:43,consts:[["slot","start"],["pager","",1,"slidePagers"],[4,"ngFor","ngForOf"],["class","productImg","src","assets/imgs/not-found.png",4,"ngIf"],[1,"ion-text-center"],["size","4","col-4","",1,"iconCol",3,"click"],["icon-only",""],["name","bookmark"],[1,"iconText"],["name","cart"],["size","4","col-4","",1,"iconCol"],["icon-only","",3,"click"],["name","create"],[2,"font-size","unset","color","#222"],["align-items-center","",3,"click"],["col-2","","size","2"],["color","primary","name","chatbox",2,"font-size","xx-large"],["col-6","","size","6"],["defaultIcon","ios-star-outline","activeColor","#534d7a","defaultColor","cadetblue","readonly","true","fontSize","24px",3,"rating"],["rating",""],["col-4","","size","4"],["float-right","","class","nombreAvis",3,"click",4,"ngIf"],[4,"ngIf"],[2,"color","black","font-size","1em"],[1,"product-card__badges-list",2,"top","18px","right","18px"],["class","product-card__badge promotion","style","font-size: 14px;",4,"ngIf"],["class","product-card__badge_New promotion","style","position: absolute; top: 25px;right: -2px;",4,"ngIf"],["class","productDetailImg","style","height: 250px;",3,"src",4,"ngIf"],[1,"product-card__badge","promotion",2,"font-size","14px"],[1,"product-card__badge_New","promotion",2,"position","absolute","top","25px","right","-2px"],[1,"productDetailImg",2,"height","250px",3,"src"],["src","assets/imgs/not-found.png",1,"productImg"],["float-right","",1,"nombreAvis",3,"click"],[2,"text-decoration","line-through"]],template:function(t,o){1&t&&(h.Qb(0,"ion-header"),h.Qb(1,"ion-toolbar"),h.Qb(2,"ion-buttons",0),h.Lb(3,"ion-back-button"),h.Pb(),h.Qb(4,"ion-title"),h.vc(5),h.bc(6,"uppercase"),h.Pb(),h.Pb(),h.Pb(),h.Qb(7,"ion-content"),h.Qb(8,"div"),h.Qb(9,"ion-slides",1),h.uc(10,x,5,3,"ion-slide",2),h.uc(11,_,1,0,"img",3),h.Pb(),h.Pb(),h.Qb(12,"div"),h.Qb(13,"ion-row",4),h.Qb(14,"ion-col",5),h.Yb("click",(function(){return o.addProductIntoFavoriteList()})),h.Qb(15,"ion-button",6),h.Lb(16,"ion-icon",7),h.Pb(),h.Qb(17,"p",8),h.vc(18),h.bc(19,"translate"),h.Pb(),h.Pb(),h.Qb(20,"ion-col",5),h.Yb("click",(function(t){return o.addInCart(t,o.product)})),h.Qb(21,"ion-button",6),h.Lb(22,"ion-icon",9),h.Pb(),h.Qb(23,"p",8),h.vc(24),h.bc(25,"translate"),h.Pb(),h.Pb(),h.Qb(26,"ion-col",10),h.Qb(27,"ion-button",11),h.Yb("click",(function(){return o.writeEvaluation()})),h.Lb(28,"ion-icon",12),h.Pb(),h.Qb(29,"p",8),h.vc(30),h.bc(31,"translate"),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Qb(32,"ion-list"),h.Qb(33,"ion-item"),h.vc(34),h.Pb(),h.Qb(35,"ion-item"),h.Qb(36,"p",13),h.vc(37),h.bc(38,"translate"),h.Pb(),h.Pb(),h.Qb(39,"ion-item",14),h.Yb("click",(function(){return o.displayAvis()})),h.Qb(40,"ion-col",15),h.Lb(41,"ion-icon",16),h.Pb(),h.Qb(42,"ion-col",17),h.Lb(43,"ionic5-star-rating",18,19),h.Pb(),h.Qb(45,"ion-col",20),h.uc(46,L,3,4,"span",21),h.Pb(),h.Pb(),h.uc(47,F,3,4,"ion-item",22),h.uc(48,O,6,4,"ion-item",22),h.uc(49,R,3,4,"ion-item",22),h.uc(50,j,3,4,"ion-item",22),h.uc(51,S,3,4,"ion-item",22),h.Qb(52,"ion-item"),h.vc(53),h.bc(54,"translate"),h.Pb(),h.Qb(55,"ion-item"),h.vc(56),h.bc(57,"translate"),h.Pb(),h.Qb(58,"ion-item"),h.vc(59),h.bc(60,"translate"),h.Pb(),h.Qb(61,"ion-item"),h.vc(62),h.bc(63,"translate"),h.Pb(),h.Qb(64,"ion-item"),h.Qb(65,"p",23),h.vc(66),h.Pb(),h.Pb(),h.Pb(),h.Pb()),2&t&&(h.zb(5),h.xc("",h.cc(6,25,o.product.Label)," "),h.zb(5),h.gc("ngForOf",o.product.ImagesPath),h.zb(1),h.gc("ngIf",null==o.product.ImagesPath||0==o.product.ImagesPath.length),h.zb(7),h.wc(h.cc(19,27,"product-detail.Favorite")),h.zb(6),h.wc(h.cc(25,29,"product-detail.Cart")),h.zb(6),h.wc(h.cc(31,31,"product-detail.Avis")),h.zb(4),h.xc(" ",o.product.Label," "),h.zb(3),h.yc("",h.cc(38,33,"product-detail.R\xe9f\xe9rence")," : ",o.product.ReferenceCode,""),h.zb(6),h.gc("rating",o.calculCommentAverageLevel()),h.zb(3),h.gc("ngIf",null!=o.product.Comments&&o.product.Comments.length>0),h.zb(1),h.gc("ngIf",o.logined),h.zb(1),h.gc("ngIf",o.logined&&null!=o.utils.formatProductPromotionInfo(o.product)),h.zb(1),h.gc("ngIf",null==o.product.QuantityPerParcel),h.zb(1),h.gc("ngIf",null!=o.product.QuantityPerParcel),h.zb(1),h.gc("ngIf",null!=o.product.QuantityPerParcel),h.zb(2),h.yc(" ",h.cc(54,35,"product-detail.Couleur"),": ",o.product.Color," "),h.zb(3),h.yc("",h.cc(57,37,"product-detail.Taille"),": ",o.product.Size,""),h.zb(3),h.yc("",h.cc(60,39,"product-detail.Material"),": ",o.product.Material,""),h.zb(3),h.yc("",h.cc(63,41,"product-detail.Forme"),": ",o.product.Forme,""),h.zb(4),h.xc("",o.product.Description," "))},directives:[b.t,b.V,b.i,b.e,b.f,b.U,b.q,b.N,u.j,u.k,b.H,b.p,b.h,b.u,b.B,b.z,w.a,b.M],pipes:[u.s,v.c],styles:[""]}),E)}],D=((A=function o(){t(this,o)}).\u0275mod=h.Ib({type:A}),A.\u0275inj=h.Hb({factory:function(t){return new(t||A)},imports:[[d.j.forChild(B)],d.j]}),A),M=((T=function o(){t(this,o)}).\u0275mod=h.Ib({type:T}),T.\u0275inj=h.Hb({factory:function(t){return new(t||T)},imports:[[u.b,l.g,b.W,D,v.b,w.b]]}),T)}}])}();