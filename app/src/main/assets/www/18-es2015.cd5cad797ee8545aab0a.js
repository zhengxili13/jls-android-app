(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"h+oH":function(t,e,r){"use strict";r.r(e),r.d(e,"ModifyUserInfoPageModule",(function(){return I}));var s=r("ofXK"),i=r("3Pt+"),n=r("TEn/"),o=r("tyNb"),a=r("mrSG"),c=r("n3qt"),d=r("fXoL"),l=r("kwrG"),b=r("MDGB"),u=r("sYmb"),p=r("O93g"),h=r("kmnG"),f=r("qFsG");function m(t,e){if(1&t&&(d.Qb(0,"ion-card-content",24),d.Qb(1,"p",25),d.vc(2),d.Qb(3,"span"),d.vc(4),d.Pb(),d.Pb(),d.Qb(5,"p",25),d.vc(6),d.Pb(),d.Qb(7,"p",25),d.vc(8),d.Pb(),d.Qb(9,"p",25),d.vc(10),d.Qb(11,"span"),d.vc(12),d.Pb(),d.Pb(),d.Qb(13,"p",25),d.vc(14),d.Pb(),d.Pb()),2&t){const t=d.ac();d.zb(2),d.xc("",t.defaultShippingAdress.ContactFirstName," "),d.zb(2),d.xc(" ",t.defaultShippingAdress.ContactLastName,""),d.zb(2),d.xc("",t.defaultShippingAdress.FirstLineAddress," "),d.zb(2),d.xc("",t.defaultShippingAdress.SecondLineAddress," "),d.zb(2),d.xc("",t.defaultShippingAdress.ZipCode," "),d.zb(2),d.xc(" ",t.defaultShippingAdress.City," "),d.zb(2),d.xc("",t.defaultShippingAdress.ContactTelephone," ")}}function g(t,e){1&t&&(d.Qb(0,"ion-card-content",26),d.Qb(1,"p",27),d.vc(2),d.bc(3,"translate"),d.Pb(),d.Pb()),2&t&&(d.zb(2),d.wc(d.cc(3,1,"NoDataToDisplay")))}function P(t,e){if(1&t){const t=d.Rb();d.Qb(0,"ion-button",28),d.Yb("click",(function(){return d.nc(t),d.ac().selectShippingAdress()})),d.vc(1),d.bc(2,"translate"),d.Pb()}2&t&&(d.zb(1),d.wc(d.cc(2,1,"order-confirmation.ChooseAnotherAddress")))}function v(t,e){if(1&t){const t=d.Rb();d.Qb(0,"ion-button",29),d.Yb("click",(function(){return d.nc(t),d.ac().selectShippingAdress()})),d.vc(1),d.bc(2,"translate"),d.Pb()}2&t&&(d.zb(1),d.wc(d.cc(2,1,"Add")))}const A=[{path:"",component:(()=>{class t extends c.a{constructor(t,e,r,s,n,o,a,c,d){super(),this.navCtrl=t,this.formBuilder=e,this.toastCtrl=r,this.loadingCtrl=s,this.network=n,this.rest=o,this.translateService=a,this.router=c,this.addressService=d,this.defaultShippingAdress={},this.UserInfo={},this.userForm=this.formBuilder.group({EntrepriseName:["",i.s.required],Siret:["",i.s.required],PhoneNumber:["",i.s.required]}),this.addressService.facturationAddressBehaviour.subscribe(t=>this.facturationAdress=t),this.addressService.defaultShipmentAdressBehaviour.subscribe(t=>this.defaultShippingAdress=t)}ionViewWillEnter(){this.defaultShippingAdress=null!=this.router.snapshot.queryParams.tempSelectedAdress?JSON.parse(this.router.snapshot.queryParams.tempSelectedAdress):this.defaultShippingAdress,this.facturationAdress=null!=this.router.snapshot.queryParams.facturationAdress?JSON.parse(this.router.snapshot.queryParams.facturationAdress):this.facturationAdress}ngOnInit(){var t=this.router.snapshot.queryParams.UserInfo;if(this.UserInfo=null!=t?JSON.parse(t):{},this.userForm.patchValue({EntrepriseName:this.UserInfo.EntrepriseName,Siret:this.UserInfo.Siret,PhoneNumber:this.UserInfo.PhoneNumber}),null!=this.UserInfo.FacturationAdress&&this.addressService.facturationAddressBehaviour.next(this.UserInfo.FacturationAdress),null!=this.UserInfo.ShippingAdress&&this.UserInfo.ShippingAdress.length>0){var e=this.UserInfo.ShippingAdress.find(t=>1==t.IsDefaultAdress);this.addressService.defaultShipmentAdressBehaviour.next(e=null==e?this.UserInfo.ShippingAdress[0]:e)}}modifyFacturationAdress(){this.navCtrl.navigateForward("AddAdressPage",{queryParams:{type:"facturationAdress",currentPage:"ModifyUserInfoPage"}})}selectShippingAdress(){this.navCtrl.navigateForward("SelectShippingAdressPage",{queryParams:{CurrentPage:"ModifyUserInfoPage"}})}saveUserInfo(){const t=Object.create(null,{showLoading:{get:()=>super.showLoading},showToast:{get:()=>super.showToast}});return Object(a.a)(this,void 0,void 0,(function*(){for(let t in this.userForm.controls)this.userForm.controls[t].markAsTouched();if(!this.userForm.invalid)if("none"!=this.network.type){console.log(this.userForm.value);var e=this.userForm.value;e.UserId=localStorage.getItem("userId"),e.DefaultShippingAddressId=null!=this.defaultShippingAdress?this.defaultShippingAdress.Id:0;var r=yield t.showLoading.call(this,this.loadingCtrl,this.translateService.instant("Loading"));this.rest.UpdateUserInfo(e).subscribe(e=>{null!=e&&e>0&&(this.UserInfo.EntrepriseName=this.userForm.value.EntrepriseName,this.UserInfo.Siret=this.userForm.value.Siret,this.UserInfo.PhoneNumber=this.userForm.value.PhoneNumber,this.UserInfo.FacturationAdress=this.facturationAdress,this.addressService.facturationAddressBehaviour.next(this.facturationAdress),t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_SaveSuccess"))),r.dismiss()},e=>{t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Error")),r.dismiss()})}else t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"))}))}}return t.\u0275fac=function(e){return new(e||t)(d.Kb(n.ab),d.Kb(i.b),d.Kb(n.gb),d.Kb(n.Y),d.Kb(l.a),d.Kb(b.a),d.Kb(u.d),d.Kb(o.a),d.Kb(p.a))},t.\u0275cmp=d.Eb({type:t,selectors:[["app-modify-user-info"]],features:[d.wb],decls:62,vars:36,consts:[["slot","start"],["slot","end"],["Expand","full","color","primary",3,"click"],[2,"margin","0px","width","100%"],[2,"padding-bottom","3px"],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["required","","matInput","","formControlName","EntrepriseName",3,"placeholder"],["required","","type","tel","matInput","","formControlName","Siret",3,"placeholder"],["matPrefix",""],["required","","type","tel","matInput","","formControlName","PhoneNumber",3,"placeholder"],[2,"padding","8px"],[2,"margin-bottom","0px"],[1,"productCard",2,"width","100%","border-bottom","0px"],[2,"padding","8px 4px 0px"],[1,"productTitle","ion-no-margin"],["style","padding: 0px; ",4,"ngIf"],["style","padding-left: 8px;",4,"ngIf"],["text-center","",1,"ion-text-center"],["size","small","color","primary","fill","outline",3,"click",4,"ngIf"],["ion-button","","size","small","color","primary","fill","outline",3,"click",4,"ngIf"],[2,"padding","8px","margin-bottom","20px"],[1,"productTitle",2,"padding","8px 4px 0px"],["float-right","",1,"articleNumber","ion-float-right",3,"click"],[2,"padding","0px"],[1,"descriptionFont"],[2,"padding-left","8px"],["text-center","",1,"descriptionFont"],["size","small","color","primary","fill","outline",3,"click"],["ion-button","","size","small","color","primary","fill","outline",3,"click"]],template:function(t,e){1&t&&(d.Qb(0,"ion-header"),d.Qb(1,"ion-toolbar"),d.Qb(2,"ion-buttons",0),d.Lb(3,"ion-back-button"),d.Pb(),d.Qb(4,"ion-buttons",1),d.Qb(5,"ion-button",2),d.Yb("click",(function(){return e.saveUserInfo()})),d.vc(6),d.bc(7,"translate"),d.Pb(),d.Pb(),d.Qb(8,"ion-title"),d.vc(9),d.bc(10,"translate"),d.Pb(),d.Pb(),d.Pb(),d.Qb(11,"ion-content"),d.Qb(12,"ion-card",3),d.Qb(13,"ion-card-content",4),d.Qb(14,"form",5),d.Qb(15,"mat-form-field",6),d.Lb(16,"input",7),d.bc(17,"translate"),d.Pb(),d.Qb(18,"mat-form-field",6),d.Lb(19,"input",8),d.bc(20,"translate"),d.Pb(),d.Qb(21,"mat-form-field",6),d.Qb(22,"span",9),d.vc(23,"+33 \xa0"),d.Pb(),d.Lb(24,"input",10),d.bc(25,"translate"),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(26,"div",11),d.Qb(27,"ion-list",12),d.Qb(28,"ion-card",13),d.Qb(29,"ion-card-header",14),d.Qb(30,"h3",15),d.vc(31),d.bc(32,"translate"),d.Pb(),d.Pb(),d.uc(33,m,15,7,"ion-card-content",16),d.uc(34,g,4,3,"ion-card-content",17),d.Pb(),d.Qb(35,"div",18),d.uc(36,P,3,3,"ion-button",19),d.uc(37,v,3,3,"ion-button",20),d.Pb(),d.Pb(),d.Pb(),d.Qb(38,"div",21),d.Qb(39,"ion-card",13),d.Qb(40,"ion-card-header",22),d.Qb(41,"h3",15),d.vc(42),d.bc(43,"translate"),d.Qb(44,"a",23),d.Yb("click",(function(){return e.modifyFacturationAdress()})),d.vc(45),d.bc(46,"translate"),d.Pb(),d.Pb(),d.Pb(),d.Qb(47,"ion-card-content",24),d.Qb(48,"p",25),d.vc(49),d.Qb(50,"span"),d.vc(51),d.Pb(),d.Pb(),d.Qb(52,"p",25),d.vc(53),d.Pb(),d.Qb(54,"p",25),d.vc(55),d.Pb(),d.Qb(56,"p",25),d.vc(57),d.Qb(58,"span"),d.vc(59),d.Pb(),d.Pb(),d.Qb(60,"p",25),d.vc(61),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb()),2&t&&(d.zb(6),d.xc("",d.cc(7,20,"add-adress.Enregistrer")," "),d.zb(3),d.wc(d.cc(10,22,"modify-user-info.modifyUserInfo")),d.zb(5),d.gc("formGroup",e.userForm),d.zb(2),d.hc("placeholder",d.cc(17,24,"add-adress.Entreprise")),d.zb(3),d.hc("placeholder",d.cc(20,26,"modify-user-info.Siret")),d.zb(5),d.hc("placeholder",d.cc(25,28,"add-adress.Telephone")),d.zb(7),d.wc(d.cc(32,30,"order-confirmation.ShippingAddress")),d.zb(2),d.gc("ngIf",null!=e.defaultShippingAdress),d.zb(1),d.gc("ngIf",null==e.defaultShippingAdress),d.zb(2),d.gc("ngIf",null!=e.defaultShippingAdress),d.zb(1),d.gc("ngIf",null==e.defaultShippingAdress),d.zb(5),d.xc("",d.cc(43,32,"order-confirmation.BillingAddress")," "),d.zb(3),d.wc(d.cc(46,34,"order-confirmation.Edit")),d.zb(4),d.xc("",e.facturationAdress.ContactFirstName," "),d.zb(2),d.xc(" ",e.facturationAdress.ContactLastName,""),d.zb(2),d.xc("",e.facturationAdress.FirstLineAddress," "),d.zb(2),d.xc("",e.facturationAdress.SecondLineAddress," "),d.zb(2),d.xc("",e.facturationAdress.ZipCode," "),d.zb(2),d.xc(" ",e.facturationAdress.City," "),d.zb(2),d.xc("",e.facturationAdress.ContactTelephone," "))},directives:[n.t,n.V,n.i,n.e,n.f,n.h,n.U,n.q,n.j,n.k,i.t,i.l,i.f,h.c,f.a,i.a,i.r,i.k,i.e,h.g,n.B,n.l,s.k],pipes:[u.c],styles:[".articleNumber[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:500}.productCard[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-left:0;margin-right:0;box-shadow:none!important;border-bottom:.5px solid #dedede;margin-top:0}.productTitle[_ngcontent-%COMP%]{font-weight:500;background-color:#f4f4f4;padding:3px;color:#000}.descriptionFont[_ngcontent-%COMP%]{margin:2px 0;color:var(--ion-color-warning-contrast)}.mat-form-field[_ngcontent-%COMP%]{display:inline}"]}),t})()}];let S=(()=>{class t{}return t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({factory:function(e){return new(e||t)},imports:[[o.j.forChild(A)],o.j]}),t})();var x=r("d3UM"),Q=r("NFeN");let I=(()=>{class t{}return t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({factory:function(e){return new(e||t)},imports:[[s.b,i.g,n.W,S,u.b,h.e,f.b,x.a,Q.b,i.q]]}),t})()}}]);