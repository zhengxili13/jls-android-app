(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{JzUc:function(e,t,r){"use strict";r.r(t),r.d(t,"AddAdressPageModule",(function(){return I}));var s=r("ofXK"),a=r("3Pt+"),i=r("TEn/"),o=r("tyNb"),n=r("mrSG"),d=r("n3qt"),l=r("fXoL"),c=r("sYmb"),h=r("kwrG"),b=r("MDGB"),u=r("x7k0"),p=r("e8h1"),m=r("O93g"),f=r("kmnG"),g=r("qFsG");function v(e,t){1&e&&(l.Qb(0,"ion-title"),l.vc(1),l.bc(2,"translate"),l.Pb()),2&e&&(l.zb(1),l.wc(l.cc(2,1,"add-adress.addAdress")))}function y(e,t){1&e&&(l.Qb(0,"ion-title"),l.vc(1),l.bc(2,"translate"),l.Pb()),2&e&&(l.zb(1),l.wc(l.cc(2,1,"add-adress.modifyAdress")))}const C=[{path:"",component:(()=>{class e extends d.a{constructor(e,t,r,s,i,o,n,d,l,c,h){super(),this.navCtrl=e,this.translateService=t,this.network=r,this.formBuilder=s,this.rest=i,this.toastCtrl=o,this.utils=n,this.loadingCtrl=d,this.storage=l,this.router=c,this.addressService=h,this.adreeForm=this.formBuilder.group({Id:["0"],EntrepriseName:["",a.s.required],FirstLineAddress:["",a.s.required],SecondLineAddress:[""],City:["",a.s.required],Country:["",a.s.required],ZipCode:["",a.s.required],ContactTelephone:["",a.s.required],ContactFax:[""]})}ngOnInit(){this.previousPage=this.router.snapshot.queryParams.currentPage,this.type=this.router.snapshot.queryParams.type,"facturationAdress"==this.type?this.adreeForm.patchValue(this.addressService.facturationAddressBehaviour.value):(this.type="shippingAdress")&&("create"==this.router.snapshot.queryParams.action?this.loadUserInfo():"update"==this.router.snapshot.queryParams.action&&this.adreeForm.patchValue(this.addressService.selectedShipmentAdressBehaviour.value))}loadUserInfo(){const e=Object.create(null,{showLoading:{get:()=>super.showLoading},showToast:{get:()=>super.showToast}});return Object(n.a)(this,void 0,void 0,(function*(){if("none"!=this.network.type){var t=yield e.showLoading.call(this,this.loadingCtrl,this.translateService.instant("Loading"));this.rest.GetUserById(yield this.utils.getKey("userId")).subscribe(r=>{null!=r?this.adreeForm.patchValue({EntrepriseName:null!=r.EntrepriseName?r.EntrepriseName:"",ContactTelephone:null!=r.PhoneNumber?r.PhoneNumber:""}):e.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Error")),t.dismiss()},r=>{e.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Error")),t.dismiss()})}else e.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"))}))}saveAdress(){const e=Object.create(null,{showLoading:{get:()=>super.showLoading},showToast:{get:()=>super.showToast}});return Object(n.a)(this,void 0,void 0,(function*(){for(let e in this.adreeForm.controls)this.adreeForm.controls[e].markAsTouched();if(!this.adreeForm.invalid)if("none"!=this.network.type){var t={adress:this.adreeForm.value,userId:yield this.utils.getKey("userId"),type:this.type},r=yield e.showLoading.call(this,this.loadingCtrl,this.translateService.instant("Loading"));this.rest.CreateOrUpdateAdress(t).subscribe(t=>{if(t.Success&&null!=t.Data){if("facturationAdress"==this.type)this.addressService.facturationAddressBehaviour.next(this.adreeForm.value),this.navCtrl.back();else if(this.type="shippingAdress"){let e=this.adreeForm.value;null!=t.Data.AdressId&&(e.Id=t.Data.AdressId),this.addressService.selectedShipmentAdressBehaviour.next(e),this.navCtrl.back()}r.dismiss()}else r.dismiss(),e.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Error"))},t=>{r.dismiss(),e.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Error"))})}else e.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"))}))}get f(){return this.adreeForm.controls}}return e.\u0275fac=function(t){return new(t||e)(l.Kb(i.ab),l.Kb(c.d),l.Kb(h.a),l.Kb(a.b),l.Kb(b.a),l.Kb(i.gb),l.Kb(u.a),l.Kb(i.Y),l.Kb(p.b),l.Kb(o.a),l.Kb(m.a))},e.\u0275cmp=l.Eb({type:e,selectors:[["app-add-adress"]],features:[l.wb],decls:49,vars:30,consts:[["slot","start"],["slot","end"],["color","primary",2,"width","100%","height","35px",3,"click"],[4,"ngIf"],[2,"background-color","#f4f4f4!important"],[2,"margin-top","0px","margin-left","0px","margin-right","0px","width","100%"],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["required","","matInput","","formControlName","EntrepriseName",3,"placeholder"],["required","","matInput","","formControlName","FirstLineAddress",3,"placeholder"],["matInput","","formControlName","SecondLineAddress",3,"placeholder"],["col-4",""],["required","","matInput","","formControlName","City",3,"placeholder"],["required","","matInput","","formControlName","Country",3,"placeholder"],["required","","matInput","","maxlength","5","formControlName","ZipCode",3,"placeholder"],["postalCode",""],["required","","type","tel","matInput","","placeholder","EX: +33 xx xx xx xx xx","formControlName","ContactTelephone"],["matPrefix",""],["type","tel","matInput","","placeholder","EX: +33 xx xx xx xx xx","formControlName","ContactFax"]],template:function(e,t){1&e&&(l.Qb(0,"ion-header"),l.Qb(1,"ion-toolbar"),l.Qb(2,"ion-buttons",0),l.Lb(3,"ion-back-button"),l.Pb(),l.Qb(4,"ion-buttons",1),l.Qb(5,"ion-button",2),l.Yb("click",(function(){return t.saveAdress()})),l.vc(6),l.bc(7,"translate"),l.Pb(),l.Pb(),l.uc(8,v,3,3,"ion-title",3),l.uc(9,y,3,3,"ion-title",3),l.Pb(),l.Pb(),l.Qb(10,"ion-content",4),l.Qb(11,"ion-card",5),l.Qb(12,"ion-card-content"),l.Qb(13,"form",6),l.Qb(14,"mat-form-field",7),l.Lb(15,"input",8),l.bc(16,"translate"),l.Pb(),l.Qb(17,"mat-form-field",7),l.Lb(18,"textarea",9),l.bc(19,"translate"),l.Pb(),l.Qb(20,"mat-form-field",7),l.Lb(21,"textarea",10),l.bc(22,"translate"),l.Pb(),l.Qb(23,"ion-row"),l.Qb(24,"ion-col",11),l.Qb(25,"mat-form-field",7),l.Lb(26,"input",12),l.bc(27,"translate"),l.Pb(),l.Pb(),l.Qb(28,"ion-col",11),l.Qb(29,"mat-form-field",7),l.Lb(30,"input",13),l.bc(31,"translate"),l.Pb(),l.Pb(),l.Qb(32,"ion-col",11),l.Qb(33,"mat-form-field",7),l.Lb(34,"input",14,15),l.bc(36,"translate"),l.Pb(),l.Pb(),l.Pb(),l.Qb(37,"mat-form-field",7),l.Qb(38,"mat-label"),l.vc(39),l.bc(40,"translate"),l.Pb(),l.Lb(41,"input",16),l.Pb(),l.Qb(42,"mat-form-field",7),l.Qb(43,"mat-label"),l.vc(44),l.bc(45,"translate"),l.Pb(),l.Qb(46,"span",17),l.vc(47,"+33 \xa0"),l.Pb(),l.Lb(48,"input",18),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&e&&(l.zb(6),l.xc(" ",l.cc(7,12,"add-adress.Enregistrer")," "),l.zb(2),l.gc("ngIf",0==t.adreeForm.controls.Id.value),l.zb(1),l.gc("ngIf",0!=t.adreeForm.controls.Id.value),l.zb(4),l.gc("formGroup",t.adreeForm),l.zb(2),l.hc("placeholder",l.cc(16,14,"add-adress.Entreprise")),l.zb(3),l.hc("placeholder",l.cc(19,16,"add-adress.Address")),l.zb(3),l.hc("placeholder",l.cc(22,18,"add-adress.Address2")),l.zb(5),l.hc("placeholder",l.cc(27,20,"add-adress.City")),l.zb(4),l.hc("placeholder",l.cc(31,22,"add-adress.Country")),l.zb(4),l.hc("placeholder",l.cc(36,24,"add-adress.PostalCode")),l.zb(5),l.wc(l.cc(40,26,"add-adress.Telephone")),l.zb(5),l.wc(l.cc(45,28,"add-adress.Fax")))},directives:[i.t,i.V,i.i,i.e,i.f,i.h,s.k,i.q,i.j,i.k,a.t,a.l,a.f,f.c,g.a,a.a,a.r,a.k,a.e,i.H,i.p,a.h,f.f,f.g,i.U],pipes:[c.c],styles:[".mat-form-field[_ngcontent-%COMP%]{display:inline}"]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},imports:[[o.j.forChild(C)],o.j]}),e})();var w=r("NFeN"),x=r("d3UM");let I=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},imports:[[s.b,a.g,i.W,P,f.e,g.b,w.b,x.a,c.b,a.q]]}),e})()}}]);