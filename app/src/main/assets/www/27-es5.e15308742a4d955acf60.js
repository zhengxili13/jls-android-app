!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,o){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,o||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=s(e);if(t){var n=s(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{KX34:function(a,i,c){"use strict";c.r(i),c.d(i,"RegistrePageModule",(function(){return G}));var l=c("ofXK"),b=c("3Pt+"),u=c("TEn/"),m=c("tyNb"),p=c("mrSG"),f=c("n3qt"),d=c("/uUt"),h=c("Kj3r"),g=c("eIep"),v=c("lJxs"),P=c("SxV6"),y=c("fXoL"),w=c("sYmb"),x=c("MDGB"),C=c("kwrG"),F=c("xHqg"),Q=c("kmnG"),I=c("qFsG"),z=c("bTqV");function N(e,t){1&e&&(y.vc(0),y.bc(1,"translate")),2&e&&y.wc(y.cc(1,1,"registre.Compte"))}function q(e,t){1&e&&(y.Qb(0,"mat-error"),y.vc(1),y.bc(2,"translate"),y.Pb()),2&e&&(y.zb(1),y.xc(" ",y.cc(2,1,"registre.Error_UserAlreadyExists")," "))}function k(e,t){1&e&&(y.Qb(0,"mat-error"),y.vc(1),y.bc(2,"translate"),y.Pb()),2&e&&(y.zb(1),y.xc(" ",y.cc(2,1,"registre.Warming_PleaseEntreCorrectEmail")," "))}function L(e,t){1&e&&(y.Qb(0,"mat-error"),y.vc(1),y.bc(2,"translate"),y.Pb()),2&e&&(y.zb(1),y.xc(" ",y.cc(2,1,"registre.Warming_AtLeast8Characters")," "))}function O(e,t){1&e&&(y.Qb(0,"div",27),y.vc(1),y.bc(2,"translate"),y.Pb()),2&e&&(y.zb(1),y.xc(" ",y.cc(2,1,"registre.Warming_PasswordsMustMatch")," "))}function E(e,t){1&e&&(y.vc(0),y.bc(1,"translate")),2&e&&y.wc(y.cc(1,1,"registre.Entreprise"))}function S(e,t){1&e&&(y.vc(0),y.bc(1,"translate")),2&e&&y.wc(y.cc(1,1,"registre.Address"))}var j,R,_,A=[{path:"",component:(j=function(a){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(m,a);var i,c,l,u=n(m);function m(t,r,o,n,a,s,i){var c;return e(this,m),(c=u.call(this)).navCtrl=t,c.translateService=r,c.formBuilder=o,c.rest=n,c.network=a,c.toastCtrl=s,c.loadingCtrl=i,c.basicInfoForm=c.formBuilder.group({email:["",b.s.compose([b.s.required,b.s.email]),c.userNameUniqueValidator()],password:["",b.s.compose([b.s.required,b.s.minLength(8)])],confirmPassword:["",b.s.required]}),c.entrepriseForm=c.formBuilder.group({entrepriseName:["",b.s.required],siret:["",b.s.required],phoneNumber:["",b.s.required]}),c.addressForm=c.formBuilder.group({Id:["0"],FirstLineAddress:["",b.s.required],SecondLineAddress:[""],City:["",b.s.required],Country:["",b.s.required],ZipCode:["",b.s.required],ContactTelephone:["",b.s.required],ContactFax:[""]}),c}return i=m,(c=[{key:"ngOnInit",value:function(){}},{key:"confirmPassword",value:function(){return this.basicInfoForm.get("password").value!=this.basicInfoForm.get("confirmPassword").value}},{key:"userNameUniqueValidator",value:function(){var e=this;return function(t){return t.valueChanges.pipe(Object(d.a)(),Object(h.a)(1e3),Object(g.a)((function(){return e.rest.CheckUserIsAlreadyExistAsync(t.value)})),Object(v.a)((function(e){return 1==e?{duplicate:!0}:null})),Object(P.a)())}}},{key:"isAlreadyExists",value:function(){return this.basicInfoForm.get("email").hasError("duplicate")}},{key:"registre",value:function(){var e=this,t=Object.create(null,{showToast:{get:function(){return r(s(m.prototype),"showToast",e)}}});return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,o,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.basicInfoForm.valid&&this.entrepriseForm.valid&&this.addressForm.valid)||this.confirmPassword()){e.next=13;break}if(this.addressForm.value.ContactTelephone=this.addressForm.value.ContactTelephone,this.addressForm.value.ContactFax=this.addressForm.value.ContactFax,r={Email:this.basicInfoForm.value.email,Password:btoa(this.basicInfoForm.value.password),Siret:this.entrepriseForm.value.siret,EntrepriseName:this.entrepriseForm.value.entrepriseName,PhoneNumber:this.entrepriseForm.value.phoneNumber,FacturationAdress:this.addressForm.value,ShipmentAdress:this.addressForm.value},"none"==this.network.type){e.next=10;break}return e.next=6,this.showLoading(this.loadingCtrl,this.translateService.instant("Loading"));case 6:o=e.sent,this.rest.Registre(r).subscribe((function(e){return Object(p.a)(n,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.Success?this.navCtrl.navigateRoot("RegistreSuccedPage",{queryParams:{email:e.DataExt,page:"RegistrePage"}}):t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Error")),o.dismiss();case 1:case"end":return r.stop()}}),r,this)})))}),(function(e){t.showToast.call(n,n.toastCtrl,n.translateService.instant("Msg_Error")),o.dismiss()})),e.next=11;break;case 10:t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"));case 11:e.next=14;break;case 13:t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_SomeErrorInForm"));case 14:case"end":return e.stop()}}),e,this)})))}},{key:"basicInfoFormCtrl",get:function(){return this.basicInfoForm.controls}},{key:"entrepriseFormCtrl",get:function(){return this.entrepriseForm.controls}},{key:"addressFormCtrl",get:function(){return this.addressForm.controls}}])&&t(i.prototype,c),l&&t(i,l),m}(f.a),j.\u0275fac=function(e){return new(e||j)(y.Kb(u.ab),y.Kb(w.d),y.Kb(b.b),y.Kb(x.a),y.Kb(C.a),y.Kb(u.gb),y.Kb(u.Y))},j.\u0275cmp=y.Eb({type:j,selectors:[["app-registre"]],features:[y.wb],decls:90,vars:70,consts:[["slot","start"],["defaultHref","/tabs/tabMyAccount"],[2,"background-color","#f4f4f4!important"],["linear",""],["stepper","matHorizontalStepper"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["matInput","","formControlName","email","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","password","required","","type","password",3,"placeholder"],["matInput","","formControlName","confirmPassword","required","","type","password",3,"placeholder"],["style","color: red; margin-bottom: 7px;",4,"ngIf"],["mat-raised-button","","color","primary","matStepperNext",""],["matInput","","formControlName","entrepriseName","required","",3,"placeholder"],["matInput","","formControlName","siret","required","",3,"placeholder"],["matInput","","required","","type","tel","matInput","","placeholder","EX: +33 xx xx xx xx xx","formControlName","phoneNumber"],["mat-raised-button","","color","warn","matStepperPrevious",""],["matInput","","formControlName","FirstLineAddress","required","",3,"placeholder"],["matInput","","formControlName","SecondLineAddress",3,"placeholder"],["col-6",""],["matInput","","formControlName","ZipCode","required","",3,"placeholder"],["matInput","","formControlName","City","required","",3,"placeholder"],["matInput","","formControlName","Country",3,"placeholder"],["matInput","","required","","type","tel","matInput","","placeholder","EX: +33 xx xx xx xx xx","formControlName","ContactTelephone"],["matInput","","type","tel","matInput","","placeholder","EX: +33 xx xx xx xx xx","formControlName","ContactFax"],["mat-raised-button","","color","primary",3,"click"],[2,"color","red","margin-bottom","7px"]],template:function(e,t){1&e&&(y.Qb(0,"ion-header"),y.Qb(1,"ion-toolbar"),y.Qb(2,"ion-buttons",0),y.Lb(3,"ion-back-button",1),y.Pb(),y.Qb(4,"ion-title"),y.vc(5),y.bc(6,"translate"),y.Pb(),y.Pb(),y.Pb(),y.Qb(7,"ion-content",2),y.Qb(8,"mat-horizontal-stepper",3,4),y.Qb(10,"mat-step",5),y.Qb(11,"form",6),y.uc(12,N,2,3,"ng-template",7),y.Qb(13,"mat-form-field"),y.Lb(14,"input",8),y.bc(15,"translate"),y.uc(16,q,3,3,"mat-error",9),y.uc(17,k,3,3,"mat-error",9),y.Pb(),y.Qb(18,"mat-form-field"),y.Lb(19,"input",10),y.bc(20,"translate"),y.uc(21,L,3,3,"mat-error",9),y.Pb(),y.Qb(22,"mat-form-field"),y.Lb(23,"input",11),y.bc(24,"translate"),y.Pb(),y.uc(25,O,3,3,"div",12),y.Qb(26,"div"),y.Qb(27,"button",13),y.vc(28),y.bc(29,"translate"),y.Pb(),y.Pb(),y.Pb(),y.Pb(),y.Qb(30,"mat-step",5),y.Qb(31,"form",6),y.uc(32,E,2,3,"ng-template",7),y.Qb(33,"mat-form-field"),y.Lb(34,"input",14),y.bc(35,"translate"),y.Pb(),y.Qb(36,"mat-form-field"),y.Lb(37,"input",15),y.bc(38,"translate"),y.Pb(),y.Qb(39,"mat-form-field"),y.Qb(40,"mat-label"),y.vc(41),y.bc(42,"translate"),y.Pb(),y.Lb(43,"input",16),y.Pb(),y.Qb(44,"div"),y.Qb(45,"button",17),y.vc(46),y.bc(47,"translate"),y.Pb(),y.Qb(48,"button",13),y.vc(49),y.bc(50,"translate"),y.Pb(),y.Pb(),y.Pb(),y.Pb(),y.Qb(51,"mat-step",5),y.Qb(52,"form",6),y.uc(53,S,2,3,"ng-template",7),y.Qb(54,"mat-form-field"),y.Lb(55,"input",18),y.bc(56,"translate"),y.Pb(),y.Qb(57,"mat-form-field"),y.Lb(58,"input",19),y.bc(59,"translate"),y.Pb(),y.Qb(60,"ion-row"),y.Qb(61,"ion-col",20),y.Qb(62,"mat-form-field"),y.Lb(63,"input",21),y.bc(64,"translate"),y.Pb(),y.Pb(),y.Qb(65,"ion-col",20),y.Qb(66,"mat-form-field"),y.Lb(67,"input",22),y.bc(68,"translate"),y.Pb(),y.Pb(),y.Pb(),y.Qb(69,"mat-form-field"),y.Lb(70,"input",23),y.bc(71,"translate"),y.Pb(),y.Qb(72,"mat-form-field"),y.Qb(73,"mat-label"),y.vc(74),y.bc(75,"translate"),y.bc(76,"translate"),y.Pb(),y.Lb(77,"input",24),y.Pb(),y.Qb(78,"mat-form-field"),y.Qb(79,"mat-label"),y.vc(80),y.bc(81,"translate"),y.Pb(),y.Lb(82,"input",25),y.Pb(),y.Qb(83,"div"),y.Qb(84,"button",17),y.vc(85),y.bc(86,"translate"),y.Pb(),y.Qb(87,"button",26),y.Yb("click",(function(){return t.registre()})),y.vc(88),y.bc(89,"translate"),y.Pb(),y.Pb(),y.Pb(),y.Pb(),y.Pb(),y.Pb()),2&e&&(y.zb(5),y.wc(y.cc(6,30,"registre.Title")),y.zb(5),y.gc("stepControl",t.basicInfoForm),y.zb(1),y.gc("formGroup",t.basicInfoForm),y.zb(3),y.hc("placeholder",y.cc(15,32,"registre.Email")),y.zb(2),y.gc("ngIf",t.isAlreadyExists()),y.zb(1),y.gc("ngIf",t.basicInfoFormCtrl.email.errors&&!t.isAlreadyExists()),y.zb(2),y.hc("placeholder",y.cc(20,34,"registre.Password")),y.zb(2),y.gc("ngIf",t.basicInfoFormCtrl.password.errors),y.zb(2),y.hc("placeholder",y.cc(24,36,"registre.Password")),y.zb(2),y.gc("ngIf",t.confirmPassword()),y.zb(3),y.wc(y.cc(29,38,"registre.Next")),y.zb(2),y.gc("stepControl",t.entrepriseForm),y.zb(1),y.gc("formGroup",t.entrepriseForm),y.zb(3),y.hc("placeholder",y.cc(35,40,"registre.CompanyName")),y.zb(3),y.hc("placeholder",y.cc(38,42,"registre.Siret")),y.zb(4),y.wc(y.cc(42,44,"registre.PhoneNumber1")),y.zb(5),y.wc(y.cc(47,46,"registre.Back")),y.zb(3),y.wc(y.cc(50,48,"registre.Next")),y.zb(2),y.gc("stepControl",t.addressForm),y.zb(1),y.gc("formGroup",t.addressForm),y.zb(3),y.hc("placeholder",y.cc(56,50,"registre.AddressLine1")),y.zb(3),y.hc("placeholder",y.cc(59,52,"registre.AddressLine2")),y.zb(5),y.hc("placeholder",y.cc(64,54,"registre.ZipCode")),y.zb(4),y.hc("placeholder",y.cc(68,56,"registre.City")),y.zb(3),y.hc("placeholder",y.cc(71,58,"registre.Country")),y.zb(4),y.yc("",y.cc(75,60,"registre.PhoneNumber")," (",y.cc(76,62,"registre.CanBeSame"),")"),y.zb(6),y.wc(y.cc(81,64,"registre.Fax")),y.zb(5),y.wc(y.cc(86,66,"registre.Back")),y.zb(3),y.wc(y.cc(89,68,"registre.Registre")))},directives:[u.t,u.V,u.i,u.e,u.f,u.U,u.q,F.a,F.b,b.t,b.l,b.f,F.c,Q.c,I.a,b.a,b.k,b.e,b.r,l.k,z.a,F.e,Q.f,F.f,u.H,u.p,Q.b],pipes:[w.c],styles:[".requiredLabel[_ngcontent-%COMP%]{color:#f53d3d}.mat-form-field[_ngcontent-%COMP%]{display:inline}"]}),j)}],T=((R=function t(){e(this,t)}).\u0275mod=y.Ib({type:R}),R.\u0275inj=y.Hb({factory:function(e){return new(e||R)},imports:[[m.j.forChild(A)],m.j]}),R),M=c("d3UM"),K=c("NFeN"),G=((_=function t(){e(this,t)}).\u0275mod=y.Ib({type:_}),_.\u0275inj=y.Hb({factory:function(e){return new(e||_)},imports:[[l.b,b.g,u.W,T,Q.e,I.b,F.d,z.b,K.b,w.b,M.a,b.g,b.q]]}),_)}}])}();